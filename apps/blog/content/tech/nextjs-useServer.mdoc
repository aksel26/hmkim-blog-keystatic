---
title: Next.js 14 Server Actions vs API Routes
summary: Next.js 14ì˜ 'use server' Server Actionsì™€ ì „í†µì ì¸ API Routesë¥¼ ë¹„êµ ë¶„ì„í•˜ê³ , í”„ë¡œì íŠ¸ ìƒí™©ë³„ ìµœì ì˜ ì„ íƒ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.
keywords:
- Tech
status: published
tags:
- Next.js
- Server Actions
- API Routes
- React
- Supabase
- ë³´ì•ˆ
createdAt: 2024-10-16
updatedAt: 2024-10-16
thumbnailImage: https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=640&h=425&fit=crop
---

Next.js 14ì—ì„œ ë„ì…ëœ `'use server'` Server Actionsì™€ ì „í†µì ì¸ API Routes, ì–´ë–¤ ê²ƒì„ ì„ íƒí•´ì•¼ í• ê¹Œìš”? ë‘ ë°©ì‹ì˜ ì°¨ì´ì ê³¼ ì‚¬ìš© ì¼€ì´ìŠ¤ë¥¼ ìƒì„¸íˆ ë¹„êµí•´ë“œë¦½ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. Server Actions (`'use server'`)
2. API Routes (app/api)
3. í•µì‹¬ ì°¨ì´ì  ë¹„êµ
4. ì‚¬ìš© ì‚¬ë¡€ë³„ ì„ íƒ ê°€ì´ë“œ
5. Client vs Server ë°ì´í„° ì¡°íšŒ

## 1. Server Actions (`'use server'`)

### ê¸°ë³¸ êµ¬ì¡°

```tsx
// app/actions/login.ts
export async function login(formData: FormData) {
"use server"; // ì„œë²„ ì¸¡ ì‹¤í–‰ ì„ ì–¸

// ì„œë²„ ì¸¡ ë¡œì§ ì§ì ‘ ì‘ì„±
const data = {
email: formData.get("email") as string,
password: formData.get("password") as string,
};

const supabase = await createClient();
return await supabase.auth.signInWithPassword(data);
}
```

### ğŸ’¡ ì£¼ìš” íŠ¹ì§•

- **ì§ì ‘ í†µí•©**: ì»´í¬ë„ŒíŠ¸ì™€ ë™ì¼í•œ íŒŒì¼/ë””ë ‰í† ë¦¬ì—ì„œ ê´€ë¦¬
- **ìë™ ì§ë ¬í™”**: FormDataë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±
- **Zero-Config**: ë³„ë„ ë¼ìš°íŠ¸ ì„¤ì • ë¶ˆí•„ìš”
- **í´ë¼ì´ì–¸íŠ¸ ì§ì ‘ í˜¸ì¶œ**: `form action={login}` ë°©ì‹ìœ¼ë¡œ ì§ì ‘ ì—°ê²°
- **ì ì§„ì  í–¥ìƒ**: JavaScript ë¹„í™œì„±í™” í™˜ê²½ì—ì„œë„ ë™ì‘

## 2. API Routes (app/api)

### ê¸°ë³¸ êµ¬ì¡°

```tsx
// app/api/login/route.ts
export async function POST(request: Request) {
const formData = await request.formData();
const data = {
email: formData.get("email") as string,
password: formData.get("password") as string,
};

const supabase = await createClient();
const result = await supabase.auth.signInWithPassword(data);

return Response.json(result);
}
```

### ğŸ’¡ ì£¼ìš” íŠ¹ì§•

- **ì „í†µì ì¸ REST API**: ëª…ì‹œì  HTTP ë©”ì†Œë“œ ì²˜ë¦¬
- **ë¼ìš°íŠ¸ ë¶„ë¦¬**: ë³„ë„ ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬ (ì˜ˆ: `/api/login`)
- **ìˆ˜ë™ íŒŒì‹±**: ìš”ì²­ ë°ì´í„° ì§ì ‘ ì²˜ë¦¬ í•„ìš”
- **CORS ì²˜ë¦¬**: ì™¸ë¶€ í˜¸ì¶œ ê°€ëŠ¥
- **HTTP í‘œì¤€ ì¤€ìˆ˜**: ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ì˜ í†µí•© ìš©ì´

## 3. í•µì‹¬ ì°¨ì´ì  ë¹„êµ

| í•­ëª© | Server Actions (`'use server'`) | API Routes (app/api) |
| ------------------------ | ----------------------------------------------- | ------------------------------- |
| **ì‹¤í–‰ ìœ„ì¹˜** | ì„œë²„ ì¸¡ í•¨ìˆ˜ | ì „í†µì  API ì—”ë“œí¬ì¸íŠ¸ |
| **í˜¸ì¶œ ë°©ì‹** | ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ í˜¸ì¶œ | fetch/axiosë¡œ HTTP ìš”ì²­ |
| **ë°ì´í„° ì „ì†¡** | FormData ìë™ ì²˜ë¦¬ | ìˆ˜ë™ íŒŒì‹± (JSON/FormData ë“±) |
| **ë¼ìš°íŒ…** | íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ì•„ë‹˜ | íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ ë¼ìš°íŒ… |
| **ì‚¬ìš© ì‚¬ë¡€** | í¼ ì œì¶œ, ì»´í¬ë„ŒíŠ¸ íŠ¹í™” ë¡œì§ | ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™, REST API ì œê³µ |
| **ì—ëŸ¬ ì²˜ë¦¬** | try/catchë¡œ ì§ì ‘ ì²˜ë¦¬ | HTTP ìƒíƒœ ì½”ë“œ ë°˜í™˜ |
| **ì¬ê²€ì¦(Revalidation)** | `revalidatePath`/`revalidateTag` ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ | ìºì‹œ í—¤ë”ë¡œ ì œì–´ |
| **ë³´ì•ˆ** | CSRF ë³´í˜¸ ìë™ ì ìš© | ìˆ˜ë™ ë³´ì•ˆ ì²˜ë¦¬ í•„ìš” |
| **íƒ€ì… ì•ˆì „ì„±** | Zod ë“±ìœ¼ë¡œ ìœ íš¨ì„± ê²€ì‚¬ ê°€ëŠ¥ | ìˆ˜ë™ ìœ íš¨ì„± ê²€ì‚¬ êµ¬í˜„ í•„ìš” |
| **í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤** | ë²ˆë“¤ í¬ê¸° ì˜í–¥ ì—†ìŒ | API í•¸ë“¤ëŸ¬ ì½”ë“œ í¬í•¨ |

## 4. ì‚¬ìš© ì‚¬ë¡€ë³„ ì„ íƒ ê°€ì´ë“œ

### âœ… Server Actions ì¶”ì²œ ê²½ìš°

**ì í•©í•œ ìƒí™©:**

1. í¼ ì œì¶œ ì²˜ë¦¬ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
2. ë°ì´í„° ì¬ê²€ì¦ì´ í•„ìš”í•œ ì—…ë°ì´íŠ¸
3. ì»´í¬ë„ŒíŠ¸ì™€ ê¸´ë°€í•œ ìƒí˜¸ì‘ìš©ì´ í•„ìš”í•œ ê²½ìš°
4. í´ë¼ì´ì–¸íŠ¸ JavaScript ì—†ì´ ì‘ë™í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥

**ì‚¬ìš© ì˜ˆì‹œ:**

```tsx
<form action={login}>
  <input name="email" />
  <input name="password" type="password" />
  <button>ë¡œê·¸ì¸</button>
</form>
```

### âœ… API Routes ì¶”ì²œ ê²½ìš°

**ì í•©í•œ ìƒí™©:**

1. íƒ€ ì‹œìŠ¤í…œê³¼ì˜ REST API í†µì‹ 
2. ì„œë“œíŒŒí‹° ì›¹í›…(Webhook) ì²˜ë¦¬
3. CORSê°€ í•„ìš”í•œ ì™¸ë¶€ í˜¸ì¶œ
4. OpenAPI ì‚¬ì–‘ì´ í•„ìš”í•œ ê²½ìš°

**ì‚¬ìš© ì˜ˆì‹œ:**

```tsx
fetch("/api/login", {
method: "POST",
body: JSON.stringify({ email, password }),
});
```

## 5. Client vs Server ë°ì´í„° ì¡°íšŒ

Supabaseë¥¼ ì˜ˆì‹œë¡œ í´ë¼ì´ì–¸íŠ¸ ë‹¨ê³¼ ì„œë²„ ë‹¨ì—ì„œì˜ ë°ì´í„° ì¡°íšŒ ë¹„êµì…ë‹ˆë‹¤.

### ğŸ”’ Server Action ë°ì´í„° ì¡°íšŒ (ì¶”ì²œ)

```tsx
// app/actions/tables.ts
"use server";

import { createClient } from "@/utils/supabase/server";

export async function fetchTables() {
const supabase = createClient();
const { data, error } = await supabase.from("information_schema.tables").select("table_name").eq("table_schema",
"public");

if (error) throw new Error("í…Œì´ë¸” ì¡°íšŒ ì‹¤íŒ¨");
return data;
}
```

**ì í•©í•œ ê²½ìš°:**

- í…Œì´ë¸” êµ¬ì¡°/ë©”íƒ€ë°ì´í„°ê°€ **ë¯¼ê°ì •ë³´**ì¼ ë•Œ
- **ê´€ë¦¬ì ì „ìš© í˜ì´ì§€**ì—ì„œ ì‚¬ìš©í•  ë•Œ
- **RBAC(Role-Based Access Control)** ì´ í•„ìš”í•œ ê²½ìš°
- **ì„œë²„ ì‚¬ì´ë“œ ìºì‹±**ì´ í•„ìš”í•  ë•Œ
- **ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG)** ì´ í•„ìš”í•œ ê²½ìš°

### ğŸ’» Client-Side ë°ì´í„° ì¡°íšŒ

```tsx
// components/TableList.tsx
"use client";

import { useEffect } from "react";
import { createClient } from "@/utils/supabase/client";

export default function TableList() {
const supabase = createClient();

useEffect(() => {
const loadTables = async () => {
const { data } = await supabase.from("information_schema.tables").select("table_name").eq("table_schema", "public");
console.log(data);
};
loadTables();
}, []);

return <div>í…Œì´ë¸” ëª©ë¡ ë¡œë”©...</div>;
}
```

**ì í•©í•œ ê²½ìš°:**

- **ê°œë°œì ë„êµ¬** ê°™ì€ **ë¹„ë³´ì•ˆ í™˜ê²½**ì—ì„œ ì‚¬ìš©í•  ë•Œ
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**ê°€ í•„ìš”í•œ ê²½ìš°
- **CLI íˆ´**ì´ë‚˜ **ë¡œì»¬ ì „ìš© ì•±**ì—ì„œ ì‚¬ìš©í•  ë•Œ
- **ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘**ì´ í•„ìš”í•  ë•Œ

## ğŸ“Š ê²°ì • ë§¤íŠ¸ë¦­ìŠ¤

| ê¸°ì¤€ | Server Action ìš°ì„  | Client-Side ìš°ì„  |
| ----------------- | ----------------------- | ---------------------- |
| **ë³´ì•ˆ ì¤‘ìš”ë„** | ë†’ìŒ (ë¯¼ê°ì •ë³´ í¬í•¨) | ë‚®ìŒ (ê³µê°œ ì •ë³´) |
| **ë°ì´í„° ë¯¼ê°ì„±** | ìŠ¤í‚¤ë§ˆ êµ¬ì¡°ê°€ ë³´í˜¸ í•„ìš” | ê³µê°œ ê°€ëŠ¥í•œ ë©”íƒ€ë°ì´í„° |
| **ì ‘ê·¼ ì œì–´** | RBAC í•„ìˆ˜ | Anonymous ì ‘ê·¼ í—ˆìš© |
| **ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­** | ìºì‹±/ì¬ê²€ì¦ í•„ìš” | ì‹¤ì‹œê°„ì„± ìš°ì„  |
| **ì‚¬ìš©ì ê¶Œí•œ** | ê´€ë¦¬ì ì „ìš© | ëª¨ë“  ì‚¬ìš©ì ì ‘ê·¼ ê°€ëŠ¥ |
| **ë¹Œë“œ ìµœì í™”** | SSG/ISR í•„ìš” | CSRë§Œìœ¼ë¡œ ì¶©ë¶„ |

## âš ï¸ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

### âŒ ìœ„í—˜í•œ í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš© íŒ¨í„´

```tsx
// âŒ ìœ„í—˜: ì‹œìŠ¤í…œ í…Œì´ë¸” ì§ì ‘ ì ‘ê·¼
const { data } = await supabase
.from("pg_tables") // ì‹œìŠ¤í…œ í…Œì´ë¸” ì§ì ‘ ì ‘ê·¼
.select("*");
```

**ë³´ì•ˆ ì›ì¹™:**

- `information_schema`ë‚˜ `pg_catalog` ì ‘ê·¼ ì‹œ **ë°˜ë“œì‹œ ì„œë²„ ë‹¨ì—ì„œ ì²˜ë¦¬**
- **Row Level Security(RLS)** ê°€ ì‹œìŠ¤í…œ í…Œì´ë¸”ì— ì ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

## ğŸ† ìµœì¢… ê¶Œì¥ì‚¬í•­

### 1. í”„ë¡œë•ì…˜ í™˜ê²½

```tsx
// âœ… ì¶”ì²œ: ì„œë²„ì—ì„œ í•„í„°ë§ëœ ë°ì´í„°ë§Œ ì „ë‹¬
export async function fetchSafeTables() {
const tables = await fetchTables();
return tables.filter((table) => !table.name.includes("private_"));
}
```

- **ë¬´ì¡°ê±´ Server Action ì‚¬ìš©**
- `createClient()` ëŒ€ì‹  `createServerClient()` ì‚¬ìš©
- RLS ì •ì±…ê³¼ ê²°í•©

### 2. ê°œë°œ í™˜ê²½

- `.env.local`ì— `NEXT_PUBLIC_SUPABASE_URL` ì œí•œì ìœ¼ë¡œ ï¿½ï¿½ì¶œ
- Client-Side ì‚¬ìš© ê°€ëŠ¥ (ì‹ ì¤‘í•˜ê²Œ)

### 3. ì•„í‚¤í…ì²˜ ì„ íƒ ê¸°ì¤€

- **í”„ë¡œì íŠ¸ ê·œëª¨**: ì†Œê·œëª¨ â†’ Server Actions, ëŒ€ê·œëª¨ â†’ API Routes
- **í´ë¼ì´ì–¸íŠ¸ ìš”êµ¬ì‚¬í•­**: SPA í•„ìš” â†’ API Routes, SSR ì¤‘ì‹¬ â†’ Server Actions
- **íŒ€ ìˆ™ë ¨ë„**: í’€ìŠ¤íƒ ê°œë°œ í¸ì˜ â†’ Server Actions, ë°±ì—”ë“œ ë¶„ë¦¬ â†’ API Routes
- **ê¸°ìˆ  ìŠ¤íƒ**: tRPC/gRPC ì‚¬ìš© â†’ API Routes, React Query ì‚¬ìš© â†’ Server Actions

## ğŸ“ˆ ì„±ëŠ¥ ë¹„êµ

```
Server-Side (Cold Start ê¸°ì¤€)
- ì´ˆê¸° ë¡œë”©: 300~500ms
- ì¬ìš”ì²­(ìºì‹±): 50~100ms

Client-Side
- ì´ˆê¸° ë¡œë”©: 150~300ms
- ì¬ìš”ì²­: 200~400ms (ìºì‹± ì–´ë ¤ì›€)
```

## ğŸ¯ ê²°ë¡ 

ë³´ì•ˆê³¼ ì•ˆì •ì„±ì´ ì¤‘ìš”í•œ ê²½ìš° **Server Actions**ì„, ê°œë°œ í¸ì˜ì„±ê³¼ ì‹¤ì‹œê°„ì„±ì´ ì¤‘ìš”í•œ ê²½ìš° **Client-Side** í˜¸ì¶œì„ ì„ íƒí•˜ì„¸ìš”.

**í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” 95% ì´ìƒ ì„œë²„ ì¸¡ ì²˜ë¦¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.**

ë‘ ë°©ì‹ ëª¨ë‘ ì¥ë‹¨ì ì´ ìˆìœ¼ë¯€ë¡œ í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ í˜¼ìš©í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ê³¼ì ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

- ì¸ì¦ ì²˜ë¦¬ â†’ Server Actions
- ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ â†’ API Routes

### ğŸ”— ì°¸ê³  ìë£Œ

- [Next.js Server Actions
ë¬¸ì„œ](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations)
- [Next.js API Routes ë¬¸ì„œ](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)
- [Supabase Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)