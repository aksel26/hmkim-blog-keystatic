---
title: í”„ë¡ íŠ¸ì—”ë“œ ë©´ì ‘ ì§ˆë¬¸ - React/Next
summary: í”„ë¡ íŠ¸ì—”ë“œ ë©´ì ‘ ì‹œ React,Next ë©´ì ‘ ì§ˆë¬¸ë“¤ì…ë‹ˆë‹¤.
keywords:
  - Tech
status: published
tags:
  - ë©´ì ‘
createdAt: 2025-10-21
updatedAt: 2025-10-21
---

## React ê´€ë ¨ ì§ˆë¬¸

### Q1. Virtual DOMì˜ ì‘ë™ ì›ë¦¬ì™€ Reconciliation ê³¼ì •ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `Diffing Algorithm`, `Fiber`, `ì¬ì¡°ì •`, `ë Œë”ë§ ìµœì í™”`, `key prop`

**ë‹µë³€:**

**Virtual DOMì´ í•„ìš”í•œ ì´ìœ :**
ì‹¤ì œ DOM ì¡°ì‘ì€ ë¹„ìš©ì´ í¬ë¯€ë¡œ(Reflow, Repaint), ë©”ëª¨ë¦¬ ìƒì˜ ê°€ìƒ DOMìœ¼ë¡œ ë¨¼ì € ë³€ê²½ì‚¬í•­ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

**Reconciliation ê³¼ì •:**

1. ìƒíƒœ ë³€ê²½ ì‹œ ìƒˆë¡œìš´ Virtual DOM íŠ¸ë¦¬ ìƒì„±
2. ì´ì „ íŠ¸ë¦¬ì™€ ë¹„êµ (Diffing)
3. ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì‹¤ì œ DOMì— ë°˜ì˜ (Commit)

**Diffing ì•Œê³ ë¦¬ì¦˜ ìµœì í™”:**

```jsx
// 1. ê°™ì€ íƒ€ì… â†’ ì†ì„±ë§Œ ì—…ë°ì´íŠ¸
<div className="before" /> â†’ <div className="after" />
// divëŠ” ì¬ì‚¬ìš©, classNameë§Œ ë³€ê²½

// 2. ë‹¤ë¥¸ íƒ€ì… â†’ ì „ì²´ êµì²´
<div /> â†’ <span />
// div ì‚­ì œ í›„ span ìƒˆë¡œ ìƒì„±

// 3. Keyë¥¼ í†µí•œ ìµœì í™”
{items.map(item => (
  <Item key={item.id} data={item} />
))}
// ì¬ë°°ì—´ ì‹œ keyë¡œ ë™ì¼ ìš”ì†Œ ì‹ë³„
```

**Keyì˜ ì¤‘ìš”ì„±:**

```jsx
// âŒ indexë¥¼ keyë¡œ ì‚¬ìš© (ì¬ë°°ì—´ ì‹œ ë¬¸ì œ)
{
  items.map((item, index) => <Item key={index} data={item} />);
}

// âœ… ê³ ìœ í•œ idë¥¼ keyë¡œ ì‚¬ìš©
{
  items.map((item) => <Item key={item.id} data={item} />);
}
```

**Fiber Architecture (React 16+):**

- ì‘ì—…ì„ ì‘ì€ ë‹¨ìœ„(Fiber)ë¡œ ë¶„í• 
- ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§
- ì¤‘ë‹¨ ê°€ëŠ¥í•œ ë Œë”ë§ (Interruptible Rendering)
- ì‘ì—… ë‹¨ìœ„ë¥¼ ë‚˜ëˆ ì„œ ì²˜ë¦¬ â†’ ë©”ì¸ ìŠ¤ë ˆë“œ ë¸”ë¡œí‚¹ ë°©ì§€

**ë Œë”ë§ ë‹¨ê³„:**

1. **Render Phase** (ì¤‘ë‹¨ ê°€ëŠ¥): Virtual DOM ë¹„êµ, ë³€ê²½ì‚¬í•­ ê³„ì‚°
2. **Commit Phase** (ì¤‘ë‹¨ ë¶ˆê°€): ì‹¤ì œ DOM ì—…ë°ì´íŠ¸

---

### Q2. React Hooksì˜ ê·œì¹™ê³¼ useStateì˜ ë‚´ë¶€ ë™ì‘ ì›ë¦¬ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `Hooks ê·œì¹™`, `Linked List`, `Fiber`, `í´ë¡œì €`, `ë°°ì¹˜ ì—…ë°ì´íŠ¸`

**ë‹µë³€:**

**Hooks ê·œì¹™:**

1. ìµœìƒìœ„ì—ì„œë§Œ í˜¸ì¶œ (ì¡°ê±´ë¬¸, ë°˜ë³µë¬¸ X)
2. React í•¨ìˆ˜ì—ì„œë§Œ í˜¸ì¶œ (í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸, Custom Hook)

```jsx
// âŒ ì˜ëª»ëœ ì‚¬ìš©
function Component({ condition }) {
  if (condition) {
    const [state, setState] = useState(0); // ìˆœì„œ ë³€ê²½ë¨
  }

  for (let i = 0; i < 3; i++) {
    const [state, setState] = useState(i); // ë°˜ë³µë¬¸ ì•ˆ
  }

  const handleClick = () => {
    const [state, setState] = useState(0); // ì¼ë°˜ í•¨ìˆ˜ ì•ˆ
  };
}

// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
function Component({ condition }) {
  const [state, setState] = useState(0);

  if (condition) {
    setState(1); // Hook í˜¸ì¶œì€ ë°–ì—ì„œ, ì‚¬ìš©ì€ ì•ˆì—ì„œ
  }
}
```

**useState ë‚´ë¶€ ë™ì‘ (ë‹¨ìˆœí™”):**

```jsx
// React ë‚´ë¶€ êµ¬í˜„ ê°œë…
let hooks = []; // Fiber ë…¸ë“œì˜ memoizedState
let currentHook = 0;

function useState(initialValue) {
  const hookIndex = currentHook;

  // ì²« ë Œë”ë§: ì´ˆê¸°ê°’ ì„¤ì •
  if (hooks[hookIndex] === undefined) {
    hooks[hookIndex] = initialValue;
  }

  const setState = (newValue) => {
    // í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ ì§€ì›
    const value = typeof newValue === "function" ? newValue(hooks[hookIndex]) : newValue;

    hooks[hookIndex] = value;
    render(); // ë¦¬ë Œë”ë§ ìŠ¤ì¼€ì¤„ë§
  };

  currentHook++;
  return [hooks[hookIndex], setState];
}

function render() {
  currentHook = 0; // ë Œë”ë§ë§ˆë‹¤ ì´ˆê¸°í™”
  Component(); // ì»´í¬ë„ŒíŠ¸ ì¬ì‹¤í–‰
}
```

**ì™œ ìˆœì„œê°€ ì¤‘ìš”í•œê°€:**

```jsx
// ì²« ë Œë”ë§
useState("name"); // hooks[0] = 'name'
useState(0); // hooks[1] = 0

// ì¡°ê±´ë¬¸ìœ¼ë¡œ ìˆœì„œ ê¹¨ì§
if (condition) {
  useState("email"); // hooks[0] = 'email' â† nameì´ ì‚¬ë¼ì§!
}
useState("name"); // hooks[1] = 'name' â† 0ì„ ë®ì–´ì”€!
useState(0); // hooks[2] = 0 â† ìƒˆ ìœ„ì¹˜
```

**ë°°ì¹˜ ì—…ë°ì´íŠ¸:**

```jsx
function Component() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1); // count = 0 + 1 = 1
    setCount(count + 1); // count = 0 + 1 = 1 (ê°™ì€ ê°’)
    setCount(count + 1); // count = 0 + 1 = 1
    // ê²°ê³¼: 1

    // âœ… í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸
    setCount((c) => c + 1); // 1
    setCount((c) => c + 1); // 2
    setCount((c) => c + 1); // 3
    // ê²°ê³¼: 3
  };
}
```

---

### Q3. useEffectì™€ useLayoutEffectì˜ ì°¨ì´, ê·¸ë¦¬ê³  í´ë¦°ì—… í•¨ìˆ˜ì˜ ì—­í• ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ìƒëª…ì£¼ê¸°`, `Side Effect`, `ë™ê¸°/ë¹„ë™ê¸°`, `í´ë¦°ì—…`, `ì˜ì¡´ì„± ë°°ì—´`, `ë©”ëª¨ë¦¬ ëˆ„ìˆ˜`

**ë‹µë³€:**

**ì‹¤í–‰ íƒ€ì´ë°:**

```
ë Œë”ë§ â†’ DOM ì—…ë°ì´íŠ¸ â†’ useLayoutEffect â†’ ë¸Œë¼ìš°ì € Paint â†’ useEffect
                       (ë™ê¸°)                              (ë¹„ë™ê¸°)
```

**useEffect:**

```jsx
useEffect(() => {
  // í™”ë©´ ë Œë”ë§ í›„ ì‹¤í–‰ (ë¹„ë™ê¸°)
  // ì‚¬ìš©ìê°€ ì´ë¯¸ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŒ

  console.log("Component mounted");
  fetchData(); // ë°ì´í„° í˜ì¹­
  trackEvent(); // ë¶„ì„

  return () => {
    // í´ë¦°ì—…: ì–¸ë§ˆìš´íŠ¸ ë˜ëŠ” ì¬ì‹¤í–‰ ì „
    console.log("Cleanup");
  };
}, [deps]);
```

**useLayoutEffect:**

```jsx
useLayoutEffect(() => {
  // DOM ì—…ë°ì´íŠ¸ ì§í›„, ë¸Œë¼ìš°ì € Paint ì „ ì‹¤í–‰ (ë™ê¸°)
  // ë ˆì´ì•„ì›ƒ ì¸¡ì •/ì¡°ì • ì‹œ ì‚¬ìš©

  const width = ref.current.offsetWidth;
  setPosition(width / 2); // ê¹œë¹¡ì„ ë°©ì§€
}, []);
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**

```jsx
// useEffect - ëŒ€ë¶€ë¶„ì˜ ê²½ìš° (95%)
useEffect(() => {
  // ë°ì´í„° í˜ì¹­
  fetch("/api/data").then(setData);

  // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
  window.addEventListener("resize", handleResize);
  return () => window.removeEventListener("resize", handleResize);

  // ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
  const chart = new Chart(ref.current);
  return () => chart.destroy();
}, []);

// useLayoutEffect - ë ˆì´ì•„ì›ƒ ê´€ë ¨ (5%)
useLayoutEffect(() => {
  // DOM ì¸¡ì •
  const height = ref.current.getBoundingClientRect().height;

  // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì¡°ì •
  window.scrollTo(0, savedPosition);

  // ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸° ìœ„ì¹˜ (ê¹œë¹¡ì„ ë°©ì§€)
  ref.current.style.opacity = "0";
}, []);
```

**í´ë¦°ì—… í•¨ìˆ˜ ì—­í• :**

```jsx
// 1. íƒ€ì´ë¨¸ ì •ë¦¬
useEffect(() => {
  const timer = setInterval(() => {
    setCount((c) => c + 1);
  }, 1000);

  return () => clearInterval(timer); // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
}, []);

// 2. êµ¬ë… í•´ì œ
useEffect(() => {
  const subscription = props.source.subscribe(handleData);

  return () => subscription.unsubscribe();
}, [props.source]);

// 3. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
useEffect(() => {
  const handleClick = () => console.log("clicked");
  document.addEventListener("click", handleClick);

  return () => document.removeEventListener("click", handleClick);
}, []);

// 4. abort ìš”ì²­
useEffect(() => {
  const controller = new AbortController();

  fetch("/api/data", { signal: controller.signal })
    .then((res) => res.json())
    .then(setData);

  return () => controller.abort(); // ì–¸ë§ˆìš´íŠ¸ ì‹œ ìš”ì²­ ì·¨ì†Œ
}, []);
```

**í´ë¦°ì—… ì‹¤í–‰ íƒ€ì´ë°:**

```jsx
useEffect(() => {
  console.log("Effect");

  return () => {
    console.log("Cleanup");
  };
}, [dep]);

// 1. ìµœì´ˆ ë Œë”ë§: Effect ì‹¤í–‰
// 2. dep ë³€ê²½: Cleanup â†’ Effect
// 3. ì–¸ë§ˆìš´íŠ¸: Cleanup
```

**ì˜ì¡´ì„± ë°°ì—´:**

```jsx
// ë¹ˆ ë°°ì—´: ë§ˆìš´íŠ¸ ì‹œ í•œ ë²ˆë§Œ
useEffect(() => {}, []);

// ì˜ì¡´ì„± ìˆìŒ: ì˜ì¡´ì„± ë³€ê²½ ì‹œë§ˆë‹¤
useEffect(() => {}, [count, user.id]);

// ì˜ì¡´ì„± ì—†ìŒ: ë§¤ ë Œë”ë§ë§ˆë‹¤ (ë¹„ê¶Œì¥)
useEffect(() => {});
```

---

### Q4. useMemoì™€ useCallbackì˜ ì°¨ì´ì™€ ì˜¬ë°”ë¥¸ ì‚¬ìš© ì‹œì ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ë©”ëª¨ì´ì œì´ì…˜`, `ì„±ëŠ¥ ìµœì í™”`, `ì°¸ì¡° ë™ì¼ì„±`, `React.memo`, `ì˜ì¡´ì„±`

**ë‹µë³€:**

**ê¸°ë³¸ ì°¨ì´:**

- `useMemo`: **ê°’**ì„ ë©”ëª¨ì´ì œì´ì…˜
- `useCallback`: **í•¨ìˆ˜**ë¥¼ ë©”ëª¨ì´ì œì´ì…˜

```jsx
// useMemo - ê³„ì‚° ë¹„ìš©ì´ í° ê°’
const expensiveValue = useMemo(() => {
  return heavyCalculation(a, b);
}, [a, b]);

// useCallback - í•¨ìˆ˜ ì°¸ì¡° ìœ ì§€
const handleClick = useCallback(() => {
  doSomething(a, b);
}, [a, b]);

// ì‚¬ì‹¤ useCallbackì€ useMemoì˜ íŠ¹ìˆ˜ ì¼€ì´ìŠ¤
const handleClick = useMemo(() => {
  return () => doSomething(a, b);
}, [a, b]);
```

**ì˜¬ë°”ë¥¸ ì‚¬ìš© ì‹œì :**

```jsx
// âœ… 1. ë¬´ê±°ìš´ ì—°ì‚°
function DataTable({ data }) {
  const sortedData = useMemo(() => {
    console.log("Sorting..."); // ì˜ì¡´ì„± ë³€ê²½ ì‹œì—ë§Œ ì‹¤í–‰
    return [...data].sort((a, b) => a.value - b.value);
  }, [data]); // dataê°€ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°

  return <Table data={sortedData} />;
}

// âœ… 2. ìì‹ ì»´í¬ë„ŒíŠ¸ ìµœì í™” (React.memoì™€ í•¨ê»˜)
function Parent() {
  const [count, setCount] = useState(0);
  const [text, setText] = useState("");

  const handleClick = useCallback(() => {
    console.log("Button clicked");
  }, []); // ì°¸ì¡° ìœ ì§€

  return (
    <>
      <button onClick={() => setCount(count + 1)}>Count: {count}</button>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <Child onClick={handleClick} /> {/* count, text ë³€ê²½ ì‹œ ë¦¬ë Œë”ë§ ì•ˆë¨ */}
    </>
  );
}

const Child = React.memo(({ onClick }) => {
  console.log("Child rendered");
  return <button onClick={onClick}>Click</button>;
});

// âœ… 3. useEffect ì˜ì¡´ì„±
function Component({ id }) {
  const fetchData = useCallback(async () => {
    const response = await fetch(`/api/${id}`);
    return response.json();
  }, [id]);

  useEffect(() => {
    fetchData(); // fetchDataê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ì¬ì‹¤í–‰ ì•ˆë¨
  }, [fetchData]);
}
```

**ë¶ˆí•„ìš”í•œ ì‚¬ìš© (ì•ˆí‹°íŒ¨í„´):**

```jsx
// âŒ 1. ë‹¨ìˆœ ê³„ì‚°
function Component() {
  const value = useMemo(() => 1 + 1, []); // ì˜¤ë²„í—¤ë“œë§Œ ì¶”ê°€
  const simple = 1 + 1; // ì´ê²Œ ë” ë¹ ë¦„
}

// âŒ 2. ì‚¬ìš©ì²˜ê°€ ì—†ëŠ” í•¨ìˆ˜
function Component() {
  const fn = useCallback(() => {}, []); // ì–´ë””ì—ë„ ì „ë‹¬ ì•ˆí•¨
  return <div>{value}</div>;
}

// âŒ 3. ì›ì‹œê°’ ë©”ëª¨ì´ì œì´ì…˜
const count = useMemo(() => 5, []); // ì˜ë¯¸ ì—†ìŒ
const count = 5; // ê·¸ëƒ¥ ì´ë ‡ê²Œ

// âŒ 4. ëª¨ë“  ê²ƒì„ ë©”ëª¨ì´ì œì´ì…˜
function Component() {
  const a = useMemo(() => 1, []);
  const b = useMemo(() => 2, []);
  const c = useMemo(() => a + b, [a, b]);
  // ì½”ë“œë§Œ ë³µì¡í•´ì§€ê³  ì„±ëŠ¥ í–¥ìƒ ì—†ìŒ
}
```

**ì„±ëŠ¥ ì¸¡ì • í›„ ì ìš©:**

```jsx
// React DevTools Profilerë¡œ ì¸¡ì •
// 1. ë Œë”ë§ ì‹œê°„ì´ ê¸´ ì»´í¬ë„ŒíŠ¸ ì°¾ê¸°
// 2. ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ í™•ì¸
// 3. useMemo/useCallback ì ìš©
// 4. ë‹¤ì‹œ ì¸¡ì •í•˜ì—¬ ê°œì„  í™•ì¸
```

**trade-off ì´í•´:**

```jsx
// ë©”ëª¨ì´ì œì´ì…˜ì˜ ë¹„ìš©:
// - ë©”ëª¨ë¦¬ ì‚¬ìš© (ì´ì „ ê°’ ì €ì¥)
// - ì˜ì¡´ì„± ë¹„êµ ì˜¤ë²„í—¤ë“œ
// - ì½”ë“œ ë³µì¡ë„ ì¦ê°€

// ë©”ëª¨ì´ì œì´ì…˜ì˜ ì´ì :
// - ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€
// - ì°¸ì¡° ë™ì¼ì„± ìœ ì§€
// - ìì‹ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ë°©ì§€
```

---

### Q5. Context APIì˜ ë™ì‘ ì›ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ë°©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ì „ì—­ ìƒíƒœ`, `props drilling`, `Provider`, `Consumer`, `ë¦¬ë Œë”ë§ ìµœì í™”`, `Context ë¶„ë¦¬`

**ë‹µë³€:**

**ê¸°ë³¸ ì‚¬ìš©:**

```jsx
const ThemeContext = createContext("light");

function App() {
  const [theme, setTheme] = useState("light");

  return (
    <ThemeContext.Provider value={theme}>
      <Child />
    </ThemeContext.Provider>
  );
}

function Child() {
  const theme = useContext(ThemeContext);
  return <div className={theme}>Content</div>;
}
```

**ì„±ëŠ¥ ë¬¸ì œ:**
Providerì˜ valueê°€ ë³€ê²½ë˜ë©´ ëª¨ë“  Consumerê°€ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤.

```jsx
// âŒ ë¬¸ì œ: ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆ ê°ì²´ ìƒì„±
function App() {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState("light");

  return (
    <Context.Provider value={{ user, theme, setUser, setTheme }}>
      <Child />
    </Context.Provider>
  );
}
// userë‚˜ themeë§Œ ë³€ê²½ë¼ë„ ëª¨ë“  Consumer ë¦¬ë Œë”ë§

// âœ… í•´ê²°: useMemoë¡œ ìµœì í™”
function App() {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState("light");

  const value = useMemo(() => ({ user, theme, setUser, setTheme }), [user, theme]);

  return (
    <Context.Provider value={value}>
      <Child />
    </Context.Provider>
  );
}
```

**Context ë¶„ë¦¬ ì „ëµ:**

```jsx
// âŒ í•˜ë‚˜ì˜ Contextì— ëª¨ë“  ìƒíƒœ
const AppContext = createContext();

function Provider({ children }) {
  const [user, setUser] = useState(null); // ê±°ì˜ ë³€ê²½ ì•ˆë¨
  const [theme, setTheme] = useState("light"); // ìì£¼ ë³€ê²½
  const [count, setCount] = useState(0); // ë§¤ìš° ìì£¼ ë³€ê²½

  return <AppContext.Provider value={{ user, theme, count }}>{children}</AppContext.Provider>;
}
// countë§Œ ë³€ê²½ë¼ë„ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§

// âœ… ë³€ê²½ ë¹ˆë„ë³„ë¡œ Context ë¶„ë¦¬
const UserContext = createContext();
const ThemeContext = createContext();
const CountContext = createContext();

function Provider({ children }) {
  const [user, setUser] = useState(null);
  const [theme, setTheme] = useState("light");
  const [count, setCount] = useState(0);

  return (
    <UserContext.Provider value={user}>
      <ThemeContext.Provider value={theme}>
        <CountContext.Provider value={count}>{children}</CountContext.Provider>
      </ThemeContext.Provider>
    </UserContext.Provider>
  );
}

// ì»´í¬ë„ŒíŠ¸ëŠ” í•„ìš”í•œ Contextë§Œ êµ¬ë…
function UserProfile() {
  const user = useContext(UserContext); // count ë³€ê²½ ì‹œ ë¦¬ë Œë”ë§ ì•ˆë¨
  return <div>{user?.name}</div>;
}
```

**ê°’ê³¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ë¶„ë¦¬:**

```jsx
const StateContext = createContext();
const DispatchContext = createContext();

function Provider({ children }) {
  const [state, setState] = useState(initialState);

  // dispatchëŠ” ë³€ê²½ë˜ì§€ ì•ŠìŒ
  const dispatch = useCallback((action) => {
    setState((prev) => reducer(prev, action));
  }, []);

  return (
    <StateContext.Provider value={state}>
      <DispatchContext.Provider value={dispatch}>{children}</DispatchContext.Provider>
    </StateContext.Provider>
  );
}

// ìƒíƒœë§Œ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸
function Display() {
  const state = useContext(StateContext);
  return <div>{state.count}</div>;
}

// ì—…ë°ì´íŠ¸ë§Œ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ (ë¦¬ë Œë”ë§ ì•ˆë¨!)
function Controls() {
  const dispatch = useContext(DispatchContext);
  return <button onClick={() => dispatch({ type: "INCREMENT" })}>+</button>;
}
```

**Selector íŒ¨í„´:**

```jsx
// Contextì—ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì„ íƒ
function createSelector(context) {
  return function useSelector(selector) {
    const value = useContext(context);
    return useMemo(() => selector(value), [value, selector]);
  };
}

const useAppSelector = createSelector(AppContext);

function Component() {
  // userë§Œ ë³€ê²½ë  ë•Œë§Œ ë¦¬ë Œë”ë§
  const user = useAppSelector((state) => state.user);
  return <div>{user.name}</div>;
}
```

**ëŒ€ì•ˆ ê³ ë ¤:**

```jsx
// Contextê°€ ë³µì¡í•´ì§€ë©´ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê³ ë ¤
// - Zustand: ê°„ë‹¨í•˜ê³  ê°€ë²¼ì›€
// - Recoil: Atom ê¸°ë°˜, ì„¸ë°€í•œ ì œì–´
// - Redux Toolkit: í‘œì¤€í™”ëœ íŒ¨í„´, ë¯¸ë“¤ì›¨ì–´

// ë‹¨ìˆœ props drillingì€ ê·¸ëŒ€ë¡œ ë‘ëŠ” ê²ƒì´ ë‚˜ì„ ìˆ˜ ìˆìŒ
// 2-3ë‹¨ê³„ ì •ë„ëŠ” Context ì—†ì´ propsë¡œ ì „ë‹¬
```

---

### Q6. React 18ì˜ ì£¼ìš” ë³€ê²½ì‚¬í•­ê³¼ Concurrent Renderingì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `Automatic Batching`, `Transitions`, `Suspense`, `useTransition`, `useDeferredValue`, `Concurrent Mode`

**ë‹µë³€:**

**1. Automatic Batching**

```jsx
// React 17: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë§Œ ë°°ì¹­
function Component() {
  const [count, setCount] = useState(0);
  const [flag, setFlag] = useState(false);

  function handleClick() {
    setCount((c) => c + 1); // ë°°ì¹­ O
    setFlag((f) => !f); // í•œ ë²ˆë§Œ ë Œë”ë§
  }

  setTimeout(() => {
    setCount((c) => c + 1); // ë°°ì¹­ X
    setFlag((f) => !f); // ë‘ ë²ˆ ë Œë”ë§
  }, 1000);
}

// React 18: ëª¨ë“  ì—…ë°ì´íŠ¸ ìë™ ë°°ì¹­
setTimeout(() => {
  setCount((c) => c + 1);
  setFlag((f) => !f); // í•œ ë²ˆë§Œ ë Œë”ë§
}, 1000);

// ë°°ì¹­ ë¹„í™œì„±í™”
import { flushSync } from "react-dom";

flushSync(() => {
  setCount((c) => c + 1); // ì¦‰ì‹œ ë Œë”ë§
});
setFlag((f) => !f); // ë³„ë„ ë Œë”ë§
```

**2. Transitions (ê¸´ê¸‰/ì§€ì—° ì—…ë°ì´íŠ¸ êµ¬ë¶„)**

```jsx
import { useTransition, useState } from "react";

function SearchPage() {
  const [query, setQuery] = useState("");
  const [results, setResults] = useState([]);
  const [isPending, startTransition] = useTransition();

  function handleChange(e) {
    const value = e.target.value;

    // ê¸´ê¸‰ ì—…ë°ì´íŠ¸: ì¦‰ì‹œ ë°˜ì˜ (ì‚¬ìš©ì ì…ë ¥)
    setQuery(value);

    // ì§€ì—° ê°€ëŠ¥í•œ ì—…ë°ì´íŠ¸: ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬
    startTransition(() => {
      const filtered = searchData(value); // ë¬´ê±°ìš´ ì‘ì—…
      setResults(filtered);
    });
  }

  return (
    <>
      <input value={query} onChange={handleChange} />
      {isPending && <Spinner />} {/* ë¡œë”© ìƒíƒœ */}
      <Results data={results} />
    </>
  );
}

// ì‚¬ìš©ìëŠ” ì…ë ¥ì´ ì¦‰ê° ë°˜ì‘í•˜ëŠ” ê²ƒì„ ë³´ì§€ë§Œ
// ê²°ê³¼ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ê³„ì‚°ë¨ (ì‘ë‹µì„± ìœ ì§€)
```

**3. useDeferredValue**

```jsx
function SearchResults({ query }) {
  // queryëŠ” ì¦‰ì‹œ ì—…ë°ì´íŠ¸, deferredQueryëŠ” ì§€ì—° ì—…ë°ì´íŠ¸
  const deferredQuery = useDeferredValue(query);

  // deferredQueryë¡œ ë¬´ê±°ìš´ ì‘ì—…
  const results = useMemo(() => {
    return searchData(deferredQuery);
  }, [deferredQuery]);

  return (
    <>
      {query !== deferredQuery && <div>Loading...</div>}
      <List items={results} />
    </>
  );
}
```

**4. Suspense for Data Fetching**

```jsx
// React 18 ì´ì „: ë¡œë”© ìƒíƒœ ì§ì ‘ ê´€ë¦¬
function UserProfile({ id }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchUser(id).then((data) => {
      setUser(data);
      setLoading(false);
    });
  }, [id]);

  if (loading) return <Spinner />;
  return <div>{user.name}</div>;
}

// React 18: Suspenseë¡œ ì„ ì–¸ì  ê´€ë¦¬
<Suspense fallback={<Spinner />}>
  <UserProfile id={123} />
</Suspense>;

// ì»´í¬ë„ŒíŠ¸ëŠ” ë°ì´í„°ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì½ìŒ
function UserProfile({ id }) {
  const user = readUser(id); // Suspense ê²½ê³„ë¡œ throw
  return <div>{user.name}</div>;
}
```

**5. Concurrent Rendering**

```jsx
// ê°œë…: ë Œë”ë§ì„ ì¤‘ë‹¨í•˜ê³  ì¬ê°œ ê°€ëŠ¥
// 1. ë†’ì€ ìš°ì„ ìˆœìœ„ ì‘ì—…ì´ ë“¤ì–´ì˜¤ë©´
// 2. í˜„ì¬ ë Œë”ë§ ì¤‘ë‹¨
// 3. ê¸´ê¸‰ ì‘ì—… ë¨¼ì € ì²˜ë¦¬
// 4. ì´ì „ ì‘ì—… ì¬ê°œ

// ì˜ˆì‹œ: íƒ€ì´í•‘ ì¤‘ ë¬´ê±°ìš´ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
function App() {
  const [input, setInput] = useState("");
  const [list, setList] = useState([]);

  return (
    <>
      {/* ë†’ì€ ìš°ì„ ìˆœìœ„ */}
      <input value={input} onChange={(e) => setInput(e.target.value)} />

      {/* ë‚®ì€ ìš°ì„ ìˆœìœ„ */}
      <HeavyList items={list} />
    </>
  );
}
// íƒ€ì´í•‘ì€ ì¦‰ì‹œ ë°˜ì‘, ë¦¬ìŠ¤íŠ¸ëŠ” ë°±ê·¸ë¼ìš´ë“œ ë Œë”ë§
```

**6. startTransition API**

```jsx
import { startTransition } from "react";

function handleClick() {
  // ê¸´ê¸‰: íƒ­ ì „í™˜
  setTab("photos");

  // ì§€ì—°: ë°ì´í„° ë¡œë“œ
  startTransition(() => {
    setPhotos(loadPhotos());
  });
}
```

**React 18 ë§ˆì´ê·¸ë ˆì´ì…˜:**

```jsx
// index.js
// React 17
import ReactDOM from "react-dom";
ReactDOM.render(<App />, document.getElementById("root"));

// React 18
import { createRoot } from "react-dom/client";
const root = createRoot(document.getElementById("root"));
root.render(<App />);
```

**ì£¼ìš” ì´ì :**

- ì‘ë‹µì„± í–¥ìƒ: ì‚¬ìš©ì ì…ë ¥ì´ í•­ìƒ ìš°ì„ 
- ë¶€ë“œëŸ¬ìš´ ì „í™˜: ë¡œë”© ìƒíƒœ ê´€ë¦¬ ê°œì„ 
- ì„±ëŠ¥ ìµœì í™”: ìë™ ë°°ì¹­ìœ¼ë¡œ ë Œë”ë§ ìµœì†Œí™”

---

### Q7. Custom Hookì„ ë§Œë“¤ ë•Œ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ê³¼ Best Practiceë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ì¬ì‚¬ìš©ì„±`, `ê´€ì‹¬ì‚¬ ë¶„ë¦¬`, `ëª…ëª… ê·œì¹™`, `ì˜ì¡´ì„± ê´€ë¦¬`, `í´ë¦°ì—…`

**ë‹µë³€:**

**Custom Hook ì„¤ê³„ ì›ì¹™:**

1. `use`ë¡œ ì‹œì‘í•˜ëŠ” ì´ë¦„
2. ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§ ì¶”ì¶œ
3. Hook ê·œì¹™ ì¤€ìˆ˜ (ìµœìƒìœ„, React í•¨ìˆ˜)
4. ì ì ˆí•œ ë°˜í™˜ê°’ ì„¤ê³„

**ê¸°ë³¸ ì˜ˆì œ:**

```jsx
// useFetch - ë°ì´í„° í˜ì¹­ ì¶”ìƒí™”
function useFetch(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    let isCancelled = false;

    setLoading(true);

    fetch(url)
      .then((res) => res.json())
      .then((data) => {
        if (!isCancelled) {
          setData(data);
          setLoading(false);
        }
      })
      .catch((err) => {
        if (!isCancelled) {
          setError(err);
          setLoading(false);
        }
      });

    return () => {
      isCancelled = true; // cleanup
    };
  }, [url]);

  return { data, loading, error };
}

// ì‚¬ìš©
function UserProfile({ userId }) {
  const { data, loading, error } = useFetch(`/api/users/${userId}`);

  if (loading) return <Spinner />;
  if (error) return <Error message={error.message} />;
  return <Profile user={data} />;
}
```

**ê³ ê¸‰ íŒ¨í„´:**

```jsx
// 1. useLocalStorage - ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë™ê¸°í™”
function useLocalStorage(key, initialValue) {
  const [value, setValue] = useState(() => {
    const stored = localStorage.getItem(key);
    return stored ? JSON.parse(stored) : initialValue;
  });

  useEffect(() => {
    localStorage.setItem(key, JSON.stringify(value));
  }, [key, value]);

  return [value, setValue];
}

// 2. useDebounce - ì…ë ¥ ë””ë°”ìš´ì‹±
function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => clearTimeout(timer);
  }, [value, delay]);

  return debouncedValue;
}

// 3. useInterval - ê°„ê²© ì‹¤í–‰
function useInterval(callback, delay) {
  const savedCallback = useRef(callback);

  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  useEffect(() => {
    if (delay === null) return;

    const timer = setInterval(() => {
      savedCallback.current();
    }, delay);

    return () => clearInterval(timer);
  }, [delay]);
}

// 4. useMediaQuery - ë°˜ì‘í˜• ì²´í¬
function useMediaQuery(query) {
  const [matches, setMatches] = useState(false);

  useEffect(() => {
    const media = window.matchMedia(query);
    setMatches(media.matches);

    const listener = (e) => setMatches(e.matches);
    media.addEventListener("change", listener);

    return () => media.removeEventListener("change", listener);
  }, [query]);

  return matches;
}

// 5. usePrevious - ì´ì „ ê°’ ì €ì¥
function usePrevious(value) {
  const ref = useRef();

  useEffect(() => {
    ref.current = value;
  }, [value]);

  return ref.current;
}

// 6. useToggle - boolean í† ê¸€
function useToggle(initialValue = false) {
  const [value, setValue] = useState(initialValue);

  const toggle = useCallback(() => {
    setValue((v) => !v);
  }, []);

  return [value, toggle];
}
```

**ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬:**

```jsx
// useAsync - ë¹„ë™ê¸° ì‘ì—… ê´€ë¦¬
function useAsync(asyncFunction, immediate = true) {
  const [status, setStatus] = useState("idle");
  const [value, setValue] = useState(null);
  const [error, setError] = useState(null);

  const execute = useCallback(
    async (...params) => {
      setStatus("pending");
      setValue(null);
      setError(null);

      try {
        const response = await asyncFunction(...params);
        setValue(response);
        setStatus("success");
        return response;
      } catch (error) {
        setError(error);
        setStatus("error");
        throw error;
      }
    },
    [asyncFunction]
  );

  useEffect(() => {
    if (immediate) {
      execute();
    }
  }, [execute, immediate]);

  return { execute, status, value, error };
}

// ì‚¬ìš©
function UserList() {
  const { execute, status, value, error } = useAsync(fetchUsers);

  if (status === "pending") return <Spinner />;
  if (status === "error") return <Error error={error} />;

  return (
    <>
      <button onClick={execute}>Refresh</button>
      <List users={value} />
    </>
  );
}
```

**Best Practices:**

```jsx
// 1. âœ… ëª…í™•í•œ ë°˜í™˜ê°’
function useUser(id) {
  // ê°ì²´ë¡œ ë°˜í™˜ (ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼)
  return { user, loading, error, refetch };

  // ë°°ì—´ë¡œ ë°˜í™˜ (ìˆœì„œë¡œ ì ‘ê·¼, ì´ë¦„ ë³€ê²½ ê°€ëŠ¥)
  return [user, { loading, error, refetch }];
}

// 2. âœ… ì˜ì¡´ì„± ëª…í™•íˆ
function useFetch(url, options) {
  useEffect(() => {
    fetchData(url, options);
  }, [url, options]); // options ë³€ê²½ ì‹œ ì¬ì‹¤í–‰

  // ì•ˆì •ì ì¸ options
  const stableOptions = useMemo(
    () => options,
    [
      /* í•„ìš”í•œ ì˜ì¡´ì„± */
    ]
  );
}

// 3. âœ… ì—ëŸ¬ ì²˜ë¦¬
function useData(id) {
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchData(id).catch((err) => {
      setError(err);
      console.error("Failed to fetch:", err);
    });
  }, [id]);

  return { data, error };
}

// 4. âœ… ì¡°ê±´ë¶€ ì‹¤í–‰ ì§€ì›
function useFetch(url, options = {}) {
  const { enabled = true } = options;

  useEffect(() => {
    if (!enabled) return;

    fetchData(url);
  }, [url, enabled]);
}

// 5. âœ… TypeScript ì§€ì›
function useUser(id: string): {
  user: User | null,
  loading: boolean,
  error: Error | null,
} {
  // ...
}
```

**ì£¼ì˜ì‚¬í•­:**

```jsx
// âŒ Hook ì•ˆì—ì„œ ì¡°ê±´ë¶€ë¡œ ë‹¤ë¥¸ Hook í˜¸ì¶œ
function useBadHook(condition) {
  if (condition) {
    const [state] = useState(0); // ìˆœì„œ ë³€ê²½!
  }
}

// âœ… Hookì€ í•­ìƒ ê°™ì€ ìˆœì„œë¡œ
function useGoodHook(condition) {
  const [state] = useState(0);

  useEffect(() => {
    if (condition) {
      // ì¡°ê±´ì€ ë‚´ë¶€ì—ì„œ
    }
  }, [condition]);
}
```

## ğŸš€ Next.js

### Q1. Next.jsì˜ ë Œë”ë§ ì „ëµ(SSG, SSR, ISR, CSR)ì„ ë¹„êµí•˜ê³ , ê°ê°ì˜ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ë¹Œë“œ íƒ€ì„`, `ìš”ì²­ ì‹œê°„`, `ì¬ê²€ì¦`, `SEO`, `ìºì‹±`, `ì„±ëŠ¥`

**ë‹µë³€:**

**1. SSG (Static Site Generation)**

```jsx
// ë¹Œë“œ íƒ€ì„ì— HTML ìƒì„±
export async function getStaticProps() {
  const posts = await fetchPosts();
  return {
    props: { posts },
  };
}

// íŠ¹ì§•:
// âœ… ê°€ì¥ ë¹ ë¦„ (CDN ìºì‹±)
// âœ… SEO ìµœì 
// âŒ ë¹Œë“œ ì‹œê°„ ì¦ê°€
// âŒ ì‹¤ì‹œê°„ ë°ì´í„° X

// ì‚¬ìš© ì‚¬ë¡€: ë¸”ë¡œê·¸, ë¬¸ì„œ, ë§ˆì¼€íŒ… í˜ì´ì§€, ì •ì  ì½˜í…ì¸ 
```

**2. SSR (Server-Side Rendering)**

```jsx
// ë§¤ ìš”ì²­ë§ˆë‹¤ ì„œë²„ì—ì„œ ë Œë”ë§
export async function getServerSideProps(context) {
  const user = await fetchUser(context.req.cookies.token);
  return {
    props: { user },
  };
}

// íŠ¹ì§•:
// âœ… í•­ìƒ ìµœì‹  ë°ì´í„°
// âœ… SEO ìµœì 
// âŒ ëŠë¦° TTFB (Time To First Byte)
// âŒ ì„œë²„ ë¶€í•˜

// ì‚¬ìš© ì‚¬ë¡€: ëŒ€ì‹œë³´ë“œ, ê°œì¸í™”ëœ í˜ì´ì§€, ì‹¤ì‹œê°„ ë°ì´í„°
```

**3. ISR (Incremental Static Regeneration)**

```jsx
// ì •ì  ìƒì„± + ì£¼ê¸°ì  ì¬ê²€ì¦
export async function getStaticProps() {
  const products = await fetchProducts();
  return {
    props: { products },
    revalidate: 60, // 60ì´ˆë§ˆë‹¤ ì¬ìƒì„±
  };
}

// íŠ¹ì§•:
// âœ… SSGì˜ ì†ë„ + SSRì˜ ìµœì‹ ì„±
// âœ… ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒì„±
// âŒ ë°ì´í„° ì§€ì—° ê°€ëŠ¥ (revalidate ì‹œê°„)

// ì‚¬ìš© ì‚¬ë¡€: ì „ììƒê±°ë˜ ì œí’ˆ í˜ì´ì§€, ë‰´ìŠ¤ ì‚¬ì´íŠ¸
```

**4. CSR (Client-Side Rendering)**

```jsx
// í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°ì´í„° í˜ì¹­
function Dashboard() {
  const { data, isLoading } = useSWR("/api/user", fetcher);

  if (isLoading) return <Spinner />;
  return <div>{data.name}</div>;
}

// íŠ¹ì§•:
// âœ… ë¹ ë¥¸ í˜ì´ì§€ ì „í™˜
// âœ… ì¸í„°ë™í‹°ë¸Œ
// âŒ SEO ë¶ˆë¦¬
// âŒ ì´ˆê¸° ë¡œë”© ëŠë¦¼

// ì‚¬ìš© ì‚¬ë¡€: ì¸ì¦ í•„ìš” í˜ì´ì§€, ê´€ë¦¬ì í˜ì´ì§€
```

**ì„ íƒ ê¸°ì¤€:**

| ì „ëµ | ì†ë„   | SEO    | ìµœì‹ ì„± | ì„œë²„ ë¶€í•˜ | ì‚¬ìš© ì‚¬ë¡€     |
| ---- | ------ | ------ | ------ | --------- | ------------- |
| SSG  | â­â­â­ | â­â­â­ | âŒ     | âŒ        | ì •ì  ì½˜í…ì¸    |
| SSR  | â­     | â­â­â­ | â­â­â­ | â­â­â­    | ë™ì  ì½˜í…ì¸    |
| ISR  | â­â­â­ | â­â­â­ | â­â­   | â­        | ì¤€ì •ì  ì½˜í…ì¸  |
| CSR  | â­â­   | âŒ     | â­â­â­ | âŒ        | ì¸ì¦ í•„ìš”     |

**í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ:**

```jsx
// í˜ì´ì§€ë³„ë¡œ ë‹¤ë¥¸ ì „ëµ ì‚¬ìš©// / (í™ˆ) â†’ SSG// /products â†’ ISR// /products/[id] â†’ ISR// /dashboard â†’ SSR + CSR// /profile â†’ SSR + CSR
```

---

### Q2. App Routerì™€ Pages Routerì˜ ì°¨ì´ì , ê·¸ë¦¬ê³  Server Componentsë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `íŒŒì¼ ì‹œìŠ¤í…œ ë¼ìš°íŒ…`, `ë ˆì´ì•„ì›ƒ`, `ì„œë²„ ì»´í¬ë„ŒíŠ¸`, `í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸`, `ë°ì´í„° í˜ì¹­`

**ë‹µë³€:**

**Pages Router (ê¸°ì¡´):**

```jsx
// pages/users/[id].js
export async function getServerSideProps({ params }) {
  const user = await fetchUser(params.id);
  return { props: { user } };
}

export default function UserPage({ user }) {
  return <div>{user.name}</div>;
}

// íŠ¹ì§•:
// - pages/ ë””ë ‰í† ë¦¬
// - getServerSideProps, getStaticPropsë¡œ ë°ì´í„° í˜ì¹­
// - _app.jsë¡œ ë ˆì´ì•„ì›ƒ
// - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ Client Component
```

**App Router (Next.js 13+):**

```jsx
// app/users/[id]/page.js
async function UserPage({ params }) {
  const user = await fetchUser(params.id); // ì§ì ‘ fetch
  return <div>{user.name}</div>;
}

export default UserPage;

// íŠ¹ì§•:
// - app/ ë””ë ‰í† ë¦¬
// - ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì§ì ‘ ë°ì´í„° í˜ì¹­
// - layout.jsë¡œ ì¤‘ì²© ë ˆì´ì•„ì›ƒ
// - ê¸°ë³¸ì´ Server Component
```

**ì£¼ìš” ì°¨ì´ì :**

| íŠ¹ì§•          | Pages Router         | App Router              |
| ------------- | -------------------- | ----------------------- |
| ìœ„ì¹˜          | `pages/`             | `app/`                  |
| ë¼ìš°íŒ…        | íŒŒì¼ ê¸°ë°˜            | í´ë” ê¸°ë°˜               |
| ë ˆì´ì•„ì›ƒ      | `_app.js`            | `layout.js` (ì¤‘ì²© ê°€ëŠ¥) |
| ë°ì´í„° í˜ì¹­   | `getServerSideProps` | ì§ì ‘ fetch              |
| ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ | Client               | Server                  |
| ìŠ¤íŠ¸ë¦¬ë°      | ì œí•œì                | Suspense ì§€ì›           |

**Server Components:**

```jsx
// app/users/page.js (Server Component - ê¸°ë³¸)
async function Users() {
  // ì„œë²„ì—ì„œë§Œ ì‹¤í–‰
  const users = await db.users.findMany(); // DB ì§ì ‘ ì ‘ê·¼
  const secret = process.env.SECRET_KEY; // ë¹„ë°€ í‚¤ ì•ˆì „

  return (
    <div>
      {users.map((user) => (
        <UserCard key={user.id} user={user} />
      ))}
    </div>
  );
}

// app/components/Counter.js (Client Component)
("use client"); // ëª…ì‹œì  ì„ ì–¸

import { useState } from "react";

export function Counter() {
  const [count, setCount] = useState(0);

  return <button onClick={() => setCount(count + 1)}>{count}</button>;
}
```

**Server vs Client Components:**

| ê¸°ëŠ¥                | Server    | Client |
| ------------------- | --------- | ------ |
| ë°ì´í„° í˜ì¹­         | âœ…        | âœ…     |
| DB ì ‘ê·¼             | âœ…        | âŒ     |
| ë¹„ë°€ í‚¤ ì‚¬ìš©        | âœ…        | âŒ     |
| useState, useEffect | âŒ        | âœ…     |
| ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬       | âŒ        | âœ…     |
| ë¸Œë¼ìš°ì € API        | âŒ        | âœ…     |
| Context             | âŒ        | âœ…     |
| ë²ˆë“¤ í¬ê¸°           | í¬í•¨ ì•ˆë¨ | í¬í•¨ë¨ |

**ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ:**

```jsx
// app/layout.js (ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ)
export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <Header />
        {children}
        <Footer />
      </body>
    </html>
  );
}

// app/dashboard/layout.js (ì¤‘ì²© ë ˆì´ì•„ì›ƒ)
export default function DashboardLayout({ children }) {
  return (
    <div>
      <Sidebar />
      <main>{children}</main>
    </div>
  );
}

// app/dashboard/page.js
// ìë™ìœ¼ë¡œ RootLayout â†’ DashboardLayout ì ìš©
```

**ì–¸ì œ Client Componentë¥¼ ì‚¬ìš©í•˜ë‚˜:**

```jsx
"use client";

// 1. useState, useEffect ë“± Hook ì‚¬ìš©
const [state, setState] = useState(0);

// 2. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
<button onClick={handleClick}>Click</button>;

// 3. ë¸Œë¼ìš°ì € API
useEffect(() => {
  localStorage.setItem("key", "value");
}, []);

// 4. React Context
const value = useContext(MyContext);

// 5. í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸
class MyComponent extends React.Component {}
```

---

### Q3. Next.jsì˜ ì´ë¯¸ì§€ ìµœì í™”(next/image)ì™€ í°íŠ¸ ìµœì í™”(next/font)ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ìë™ ìµœì í™”`, `WebP`, `lazy loading`, `placeholder`, `srcset`, `FOUT ë°©ì§€`

**ë‹µë³€:**

**next/image ìµœì í™”:**

```jsx
import Image from "next/image";

function ProductCard() {
  return (
    <Image
      src="/product.jpg"
      alt="Product"
      width={500}
      height={300}
      priority // LCP ìµœì í™” (Above the fold)
      placeholder="blur" // ë¸”ëŸ¬ íš¨ê³¼
      blurDataURL="data:image/..." // ë˜ëŠ” ìë™ ìƒì„±
      quality={80} // 1-100 (ê¸°ë³¸ 75)
      sizes="(max-width: 768px) 100vw, 50vw" // ë°˜ì‘í˜•
    />
  );
}
```

**ìë™ ìµœì í™” ê¸°ëŠ¥:**

1. **ì§€ì—° ë¡œë”©**: viewportì— ë“¤ì–´ì˜¬ ë•Œ ë¡œë“œ
2. **WebP/AVIF ë³€í™˜**: ìµœì‹  í¬ë§·ìœ¼ë¡œ ìë™ ë³€í™˜
3. **ë°˜ì‘í˜•**: srcset ìë™ ìƒì„±
4. **í¬ê¸° ìµœì í™”**: ë””ë°”ì´ìŠ¤ì— ë§ëŠ” í¬ê¸° ì œê³µ
5. **ìºì‹±**: ìë™ ìºì‹œ ê´€ë¦¬
6. **ë ˆì´ì•„ì›ƒ ì‹œí”„íŠ¸ ë°©ì§€**: width/height í•„ìˆ˜

**ì„¤ì •:**

```jsx
// next.config.js
module.exports = {
  images: {
    domains: ["example.com", "cdn.example.com"], // ì™¸ë¶€ ì´ë¯¸ì§€ í—ˆìš©
    deviceSizes: [640, 750, 828, 1080, 1200, 1920], // ìƒì„±í•  ì´ë¯¸ì§€ í¬ê¸°
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
    formats: ["image/avif", "image/webp"], // í¬ë§· ìš°ì„ ìˆœìœ„
    minimumCacheTTL: 60, // ìºì‹œ ì‹œê°„ (ì´ˆ)
    dangerouslyAllowSVG: true, // SVG í—ˆìš©
    contentSecurityPolicy: "default-src 'self'; script-src 'none'; sandbox;",
  },
};
```

**fill ëª¨ë“œ:**

```jsx
// ë¶€ëª¨ í¬ê¸°ì— ë§ì¶¤ (ë°˜ì‘í˜•)
<div style={{ position: "relative", width: "100%", height: "400px" }}>
  <Image src="/hero.jpg" alt="Hero" fill style={{ objectFit: "cover" }} />
</div>
```

**next/font ìµœì í™”:**

```jsx
// app/layout.js
import { Inter, Noto_Sans_KR, Roboto_Mono } from "next/font/google";

// Google Fonts
const inter = Inter({
  subsets: ["latin"],
  display: "swap", // FOUT ë°©ì§€
  variable: "--font-inter", // CSS ë³€ìˆ˜
});

const notoSansKR = Noto_Sans_KR({
  weight: ["400", "700"],
  subsets: ["latin"],
  display: "swap",
});

// ë¡œì»¬ í°íŠ¸
const robotoMono = localFont({
  src: "./fonts/RobotoMono-Regular.woff2",
  display: "swap",
  variable: "--font-roboto-mono",
});

export default function RootLayout({ children }) {
  return (
    <html lang="ko" className={`${inter.variable} ${robotoMono.variable}`}>
      <body className={notoSansKR.className}>{children}</body>
    </html>
  );
}
```

**ì¥ì :**

```jsx
// 1. ìë™ ìì²´ í˜¸ìŠ¤íŒ… (Google Fontsë„)
// - ë¹Œë“œ ì‹œ í°íŠ¸ ë‹¤ìš´ë¡œë“œ
// - ìì²´ ì„œë²„ì—ì„œ ì œê³µ
// - ì™¸ë¶€ ìš”ì²­ ì—†ìŒ

// 2. ë ˆì´ì•„ì›ƒ ì‹œí”„íŠ¸ ì œê±°
// - í°íŠ¸ ë©”íŠ¸ë¦­ ìë™ ê³„ì‚°
// - CSSë¡œ ì˜ˆì•½ ê³µê°„ í™•ë³´

// 3. FOUT/FOIT ë°©ì§€
// - display: swap ìë™ ì ìš©
// - í´ë°± í°íŠ¸ì™€ í¬ê¸° ë§ì¶¤

// 4. CSS ë³€ìˆ˜ë¡œ ì‚¬ìš©
.title {
  font-family: var(--font-inter);
}
```

**ì—¬ëŸ¬ í°íŠ¸ ì‚¬ìš©:**

```jsx
// í˜ì´ì§€ë³„ ë‹¤ë¥¸ í°íŠ¸
export default function SpecialPage() {
  return (
    <div className={specialFont.className}>
      <h1>Special Font</h1>
    </div>
  );
}

// íŠ¹ì • ìš”ì†Œë§Œ
<p className={inter.className}>Inter font</p>
<code className={robotoMono.className}>Roboto Mono</code>
```

---

### Q4. API Routesì™€ Route Handlersì˜ ì°¨ì´, ê·¸ë¦¬ê³  Middlewareì˜ í™œìš© ë°©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `REST API`, `ì¸ì¦`, `CORS`, `ì—ëŸ¬ ì²˜ë¦¬`, `ë¯¸ë“¤ì›¨ì–´`, `ë¦¬ë‹¤ì´ë ‰íŠ¸`

**ë‹µë³€:**

**Pages Router - API Routes:**

```jsx
// pages/api/users.js
export default function handler(req, res) {
  if (req.method === "GET") {
    const users = getUsers();
    res.status(200).json({ users });
  } else if (req.method === "POST") {
    const user = req.body;
    createUser(user);
    res.status(201).json(user);
  } else {
    res.status(405).json({ error: "Method not allowed" });
  }
}
```

**App Router - Route Handlers:**

```jsx
// app/api/users/route.js
import { NextResponse } from "next/server";

export async function GET(request) {
  // Query params
  const searchParams = request.nextUrl.searchParams;
  const query = searchParams.get("query");

  const users = await db.users.findMany({
    where: { name: { contains: query } },
  });

  return NextResponse.json({ users });
}

export async function POST(request) {
  const body = await request.json();

  // ê²€ì¦
  if (!body.email) {
    return NextResponse.json({ error: "Email required" }, { status: 400 });
  }

  const user = await db.users.create({ data: body });

  return NextResponse.json(user, { status: 201 });
}
```

**ë™ì  ë¼ìš°íŠ¸:**

```jsx
// app/api/users/[id]/route.js
export async function GET(request, { params }) {
  const user = await db.users.findUnique({
    where: { id: params.id },
  });

  if (!user) {
    return NextResponse.json({ error: "User not found" }, { status: 404 });
  }

  return NextResponse.json(user);
}

export async function PUT(request, { params }) {
  const body = await request.json();

  const user = await db.users.update({
    where: { id: params.id },
    data: body,
  });

  return NextResponse.json(user);
}

export async function DELETE(request, { params }) {
  await db.users.delete({
    where: { id: params.id },
  });

  return new Response(null, { status: 204 });
}
```

**ì—ëŸ¬ ì²˜ë¦¬:**

```jsx
export async function POST(request) {
  try {
    const body = await request.json();

    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    const result = await processData(body);

    return NextResponse.json(result);
  } catch (error) {
    console.error("API Error:", error);

    return NextResponse.json({ error: error.message }, { status: 500 });
  }
}
```

**Middleware:**

```jsx
// middleware.js
import { NextResponse } from "next/server";

export function middleware(request) {
  // 1. ì¸ì¦ ì²´í¬
  const token = request.cookies.get("token");

  if (!token && request.nextUrl.pathname.startsWith("/dashboard")) {
    return NextResponse.redirect(new URL("/login", request.url));
  }

  // 2. í—¤ë” ì¶”ê°€
  const response = NextResponse.next();
  response.headers.set("X-Custom-Header", "value");
  response.headers.set("X-Request-Time", Date.now().toString());

  // 3. ì¿ í‚¤ ì„¤ì •
  response.cookies.set("visited", "true", { maxAge: 60 * 60 * 24 });

  return response;
}

// íŠ¹ì • ê²½ë¡œì—ë§Œ ì ìš©
export const config = {
  matcher: [
    "/dashboard/:path*",
    "/api/:path*",
    "/((?!_next|static|favicon.ico).*)", // ì •ê·œì‹
  ],
};
```

**Middleware í™œìš© ì‚¬ë¡€:**

```jsx
// 1. ì¸ì¦/ì¸ê°€
export function middleware(request) {
  const session = request.cookies.get("session");

  if (!session) {
    return NextResponse.redirect(new URL("/login", request.url));
  }

  // JWT ê²€ì¦
  try {
    const user = verifyJWT(session.value);

    // ê¶Œí•œ ì²´í¬
    if (request.nextUrl.pathname.startsWith("/admin") && !user.isAdmin) {
      return NextResponse.redirect(new URL("/unauthorized", request.url));
    }
  } catch (error) {
    return NextResponse.redirect(new URL("/login", request.url));
  }

  return NextResponse.next();
}

// 2. A/B í…ŒìŠ¤íŒ…
export function middleware(request) {
  const bucket = Math.random() < 0.5 ? "A" : "B";

  const response = NextResponse.next();
  response.cookies.set("bucket", bucket);

  return response;
}

// 3. êµ­ì œí™” (i18n)
export function middleware(request) {
  const locale = request.cookies.get("locale")?.value || "ko";
  const pathname = request.nextUrl.pathname;

  if (!pathname.startsWith(`/${locale}`)) {
    return NextResponse.redirect(new URL(`/${locale}${pathname}`, request.url));
  }

  return NextResponse.next();
}

// 4. ë¡œê¹…
export function middleware(request) {
  console.log({
    method: request.method,
    url: request.url,
    userAgent: request.headers.get("user-agent"),
    time: new Date().toISOString(),
  });

  return NextResponse.next();
}

// 5. ë´‡ ê°ì§€
export function middleware(request) {
  const userAgent = request.headers.get("user-agent") || "";

  const isBot = /bot|crawler|spider/i.test(userAgent);

  if (isBot && request.nextUrl.pathname.startsWith("/api")) {
    return NextResponse.json({ error: "Bots not allowed" }, { status: 403 });
  }

  return NextResponse.next();
}
```

**Middleware vs API Route:**

- **Middleware**: ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ì‹¤í–‰ (ë¹ ë¦„)
- **API Route**: íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ë§Œ (ë¬´ê±°ìš´ ë¡œì§ ê°€ëŠ¥)

---

### Q5. Next.jsì˜ ìºì‹± ì „ëµê³¼ revalidate ì˜µì…˜ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `Data Cache`, `Full Route Cache`, `Request Memoization`, `On-Demand Revalidation`, `íƒœê·¸ ê¸°ë°˜`

**ë‹µë³€:**

**ìºì‹± ë ˆë²¨:**

**1. Full Route Cache (ë¹Œë“œ íƒ€ì„)**

```jsx
// app/posts/page.js
export const revalidate = 3600; // 1ì‹œê°„

async function PostsPage() {
  const posts = await fetch("https://api.example.com/posts");
  return <PostList posts={posts} />;
}

// ë¹Œë“œ ì‹œ HTML ìƒì„± â†’ 1ì‹œê°„ ë™ì•ˆ ì¬ì‚¬ìš©
```

**2. Data Cache (fetch ë ˆë²¨)**

```jsx
// ê¸°ë³¸: ë¬´ì œí•œ ìºì‹œ (SSG)
const data = await fetch("https://api.example.com/data");

// ìºì‹œ ë¹„í™œì„±í™” (SSR)
const data = await fetch("https://api.example.com/data", {
  cache: "no-store",
});

// ì‹œê°„ ê¸°ë°˜ ì¬ê²€ì¦ (ISR)
const data = await fetch("https://api.example.com/data", {
  next: { revalidate: 3600 }, // 1ì‹œê°„
});

// íƒœê·¸ ê¸°ë°˜ ì¬ê²€ì¦
const data = await fetch("https://api.example.com/data", {
  next: { tags: ["posts"] },
});
```

**3. Request Memoization (ìš”ì²­ ì¤‘ë³µ ì œê±°)**

```jsx
// ê°™ì€ ë Œë”ë§ ì‚¬ì´í´ì—ì„œ ë™ì¼ ìš”ì²­ì€ í•œ ë²ˆë§Œ
async function Layout() {
  const user = await fetch("/api/user"); // ì²« ìš”ì²­
  return <Header user={user} />;
}

async function Page() {
  const user = await fetch("/api/user"); // ì¤‘ë³µ ì œê±°ë¨
  return <Profile user={user} />;
}

// ë‚´ë¶€ì ìœ¼ë¡œ React Cache ì‚¬ìš©
```

**revalidate ì˜µì…˜:**

```jsx
// 1. í˜ì´ì§€ ë ˆë²¨
// app/products/page.js
export const revalidate = 60; // 60ì´ˆ

export default async function Products() {
  const products = await getProducts();
  return <ProductList products={products} />;
}

// 2. fetch ë ˆë²¨ (ìš°ì„ ìˆœìœ„ ë†’ìŒ)
const data1 = await fetch('/api/data1', { next: { revalidate: 30 } });
const data2 = await fetch('/api/data2', { next: { revalidate: 60 } });
// ì´ í˜ì´ì§€ëŠ” 30ì´ˆë§ˆë‹¤ ì¬ê²€ì¦

// 3. ë ˆì´ì•„ì›ƒ ë ˆë²¨
// app/layout.js
export const revalidate = 3600;

// 4. ë™ì  í•¨ìˆ˜ ì‚¬ìš© ì‹œ ìë™ no-store
export default async function Page({ searchParams }) {
  // cookies(), headers(), searchParams ì‚¬ìš© ì‹œ ë™ì 
  const query = searchParams.query;
  return <Results query={query} />;
}
```

**On-Demand Revalidation:**

```jsx
// app/api/revalidate/route.js
import { revalidatePath, revalidateTag } from "next/cache";

export async function POST(request) {
  const { path, tag, secret } = await request.json();

  // ë³´ì•ˆ ê²€ì¦
  if (secret !== process.env.REVALIDATE_SECRET) {
    return NextResponse.json({ error: "Invalid secret" }, { status: 401 });
  }

  try {
    // ê²½ë¡œ ê¸°ë°˜
    if (path) {
      revalidatePath(path);
      console.log(`Revalidated path: ${path}`);
    }

    // íƒœê·¸ ê¸°ë°˜
    if (tag) {
      revalidateTag(tag);
      console.log(`Revalidated tag: ${tag}`);
    }

    return NextResponse.json({ revalidated: true });
  } catch (error) {
    return NextResponse.json({ error: error.message }, { status: 500 });
  }
}

// CMS ì›¹í›…ì—ì„œ í˜¸ì¶œ
// POST /api/revalidate
// { "path": "/posts", "secret": "..." }
// { "tag": "posts", "secret": "..." }
```

**íƒœê·¸ ê¸°ë°˜ ì¬ê²€ì¦:**

```jsx
// ë°ì´í„° í˜ì¹­ ì‹œ íƒœê·¸ ì§€ì •
async function getPosts() {
  const res = await fetch("https://api.example.com/posts", {
    next: { tags: ["posts"] },
  });
  return res.json();
}

async function getPost(id) {
  const res = await fetch(`https://api.example.com/posts/${id}`, {
    next: { tags: ["posts", `post-${id}`] },
  });
  return res.json();
}

// ì¬ê²€ì¦
revalidateTag("posts"); // ëª¨ë“  posts ê´€ë ¨ ìºì‹œ ë¬´íš¨í™”
revalidateTag("post-1"); // íŠ¹ì • postë§Œ ë¬´íš¨í™”
```

**ìºì‹± ì „ëµ ì„ íƒ:**

```jsx
// 1. ì •ì  ë°ì´í„° (ë³€ê²½ ê±°ì˜ ì—†ìŒ)
export const revalidate = false; // ë˜ëŠ” ëª…ì‹œ ì•ˆí•¨
// ì˜ˆ: ë¸”ë¡œê·¸ ê¸€, ë¬¸ì„œ

// 2. ìì£¼ ë³€ê²½ë˜ëŠ” ë°ì´í„°
export const revalidate = 60; // 1ë¶„
// ì˜ˆ: ì œí’ˆ ê°€ê²©, ì¬ê³ 

// 3. ì‹¤ì‹œê°„ ë°ì´í„°
export const dynamic = "force-dynamic"; // no-store
// ì˜ˆ: ëŒ€ì‹œë³´ë“œ, ì‚¬ìš©ìë³„ ë°ì´í„°

// 4. í˜¼í•©
async function Page() {
  // ì •ì 
  const config = await fetch("/api/config", { next: { revalidate: 3600 } });

  // ë™ì 
  const user = await fetch("/api/user", { cache: "no-store" });

  return <PageContent config={config} user={user} />;
}
```

**ìºì‹œ ë¬´íš¨í™”:**

```jsx
// 1. ì‹œê°„ ê¸°ë°˜ (ìë™)
export const revalidate = 60;

// 2. On-Demand (ìˆ˜ë™)
revalidatePath("/posts");
revalidateTag("posts");

// 3. í´ë¼ì´ì–¸íŠ¸ì—ì„œ (router)
("use client");
import { useRouter } from "next/navigation";

function Component() {
  const router = useRouter();

  const handleUpdate = async () => {
    await updateData();
    router.refresh(); // í˜„ì¬ ê²½ë¡œ ì¬ê²€ì¦
  };
}
```

---

### Q6. Dynamic Routesì™€ Catch-all Routes, generateStaticParamsë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ë™ì  ë¼ìš°íŒ…`, `ì •ì  ìƒì„±`, `fallback`, `ë¹Œë“œ ìµœì í™”`, `SEO`

**ë‹µë³€:**

**Dynamic Routes:**

```jsx
// app/posts/[slug]/page.js
// ë§¤ì¹­: /posts/hello, /posts/world

async function PostPage({ params }) {
  const post = await getPost(params.slug);

  return (
    <article>
      <h1>{post.title}</h1>
      <div>{post.content}</div>
    </article>
  );
}

export default PostPage;
```

**Catch-all Routes:**

```jsx
// app/docs/[...slug]/page.js
// ë§¤ì¹­: /docs/a, /docs/a/b, /docs/a/b/c

async function DocsPage({ params }) {
  const segments = params.slug; // ['a', 'b', 'c']
  const path = segments.join("/");

  const doc = await getDoc(path);
  return <Documentation doc={doc} />;
}

// app/docs/[[...slug]]/page.js (Optional Catch-all)
// ë§¤ì¹­: /docs, /docs/a, /docs/a/b

async function DocsPage({ params }) {
  // params.slugê°€ undefinedì¼ ìˆ˜ ìˆìŒ
  const segments = params.slug || [];
  const doc = segments.length > 0 ? await getDoc(segments.join("/")) : await getHomePage();

  return <Documentation doc={doc} />;
}
```

**generateStaticParams (SSG):**

```jsx
// app/posts/[slug]/page.js

// ë¹Œë“œ ì‹œ ìƒì„±í•  ê²½ë¡œ ì§€ì •
export async function generateStaticParams() {
  const posts = await getAllPosts();

  return posts.map((post) => ({
    slug: post.slug,
  }));
}

async function PostPage({ params }) {
  const post = await getPost(params.slug);
  return <Article post={post} />;
}

// ë¹Œë“œ ì‹œ ìƒì„±:
// /posts/first-post
// /posts/second-post
// /posts/third-post
```

**ì¤‘ì²© ë™ì  ë¼ìš°íŠ¸:**

```jsx
// app/categories/[category]/posts/[slug]/page.js

export async function generateStaticParams() {
  const categories = await getCategories();

  const paths = [];

  for (const category of categories) {
    const posts = await getPostsByCategory(category.id);

    posts.forEach((post) => {
      paths.push({
        category: category.slug,
        slug: post.slug,
      });
    });
  }

  return paths;
}

// ìƒì„± ê²½ë¡œ:
// /categories/tech/posts/nextjs-guide
// /categories/tech/posts/react-tips
// /categories/design/posts/ui-patterns
```

**dynamicParams ì˜µì…˜:**

```jsx
// generateStaticParamsì— ì—†ëŠ” ê²½ë¡œ ì²˜ë¦¬
export const dynamicParams = true; // ê¸°ë³¸ê°’

// true: ISR ë°©ì‹ (ìš”ì²­ ì‹œ ìƒì„±)
// false: generateStaticParamsì— ì—†ìœ¼ë©´ 404

export const dynamicParams = false;

export async function generateStaticParams() {
  return [{ slug: "post-1" }, { slug: "post-2" }];
}

// dynamicParams = true: /posts/post-3 â†’ ìƒì„±ë¨
// dynamicParams = false: /posts/post-3 â†’ 404
```

**ì„±ëŠ¥ ìµœì í™”:**

```jsx
// ë§ì€ ê²½ë¡œê°€ ìˆì„ ë•Œ
export async function generateStaticParams() {
  const posts = await getAllPosts();

  // ìƒìœ„ Nê°œë§Œ ë¹Œë“œ íƒ€ì„ì— ìƒì„±
  const topPosts = posts.slice(0, 100);

  return topPosts.map((post) => ({
    slug: post.slug,
  }));
}

// ë‚˜ë¨¸ì§€ëŠ” ìš”ì²­ ì‹œ ìƒì„± (ISR)
export const dynamicParams = true;
```

**ë©”íƒ€ë°ì´í„° ìƒì„±:**

```jsx
// app/posts/[slug]/page.js

export async function generateMetadata({ params }) {
  const post = await getPost(params.slug);

  return {
    title: post.title,
    description: post.excerpt,
    openGraph: {
      title: post.title,
      description: post.excerpt,
      images: [post.image],
    },
  };
}

export async function generateStaticParams() {
  const posts = await getAllPosts();
  return posts.map((post) => ({ slug: post.slug }));
}

export default async function PostPage({ params }) {
  const post = await getPost(params.slug);
  return <Article post={post} />;
}
```

---

### Q7. Next.jsì˜ ì„±ëŠ¥ ìµœì í™” ê¸°ë²•ê³¼ Bundle Analyzer ì‚¬ìš©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…`, `Dynamic Import`, `Tree Shaking`, `ë²ˆë“¤ ë¶„ì„`, `Lazy Loading`

**ë‹µë³€:**

**1. Dynamic Import (ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…)**

```jsx
import dynamic from "next/dynamic";

// í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ ë¡œë“œ
const HeavyComponent = dynamic(() => import("./HeavyComponent"), {
  loading: () => <Spinner />,
  ssr: false, // SSR ë¹„í™œì„±í™”
});

// Named Export
const Chart = dynamic(() => import("./Chart").then((mod) => mod.Chart));

// ì¡°ê±´ë¶€ ë¡œë“œ
function Page() {
  const [show, setShow] = useState(false);

  return (
    <>
      <button onClick={() => setShow(true)}>Show</button>
      {show && <HeavyComponent />}
    </>
  );
}
```

**2. Script ìµœì í™”**

```jsx
import Script from "next/script";

function Page() {
  return (
    <>
      {/* beforeInteractive: í˜ì´ì§€ ë¡œë“œ ì „ (ì¤‘ìš”í•œ ìŠ¤í¬ë¦½íŠ¸) */}
      <Script src="https://polyfill.io/v3/polyfill.min.js" strategy="beforeInteractive" />

      {/* afterInteractive: í˜ì´ì§€ ë¡œë“œ í›„ (ê¸°ë³¸ê°’) */}
      <Script src="https://analytics.com/script.js" strategy="afterInteractive" onLoad={() => console.log("Loaded")} />

      {/* lazyOnload: ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë¡œë“œ í›„ */}
      <Script src="https://widget.com/script.js" strategy="lazyOnload" />

      {/* worker: Web Workerì—ì„œ ì‹¤í–‰ (ì‹¤í—˜ì ) */}
      <Script src="/scripts/my-script.js" strategy="worker" />
    </>
  );
}
```

**4. webpack ìµœì í™”**

```jsx
// next.config.js
module.exports = {
  webpack: (config, { isServer }) => {
    // í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì—ì„œ ì œì™¸
    if (!isServer) {
      config.resolve.fallback = {
        fs: false,
        net: false,
        tls: false,
        crypto: false,
      };
    }

    // ë²ˆë“¤ í¬ê¸°ê°€ í° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë³„ë„ ì²­í¬
    config.optimization.splitChunks = {
      chunks: "all",
      cacheGroups: {
        default: false,
        vendors: false,
        // ë²¤ë” ì²­í¬
        vendor: {
          name: "vendor",
          chunks: "all",
          test: /node_modules/,
          priority: 20,
        },
        // ê³µí†µ ì²­í¬
        common: {
          name: "common",
          minChunks: 2,
          chunks: "async",
          priority: 10,
          reuseExistingChunk: true,
          enforce: true,
        },
        // íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶„ë¦¬
        lodash: {
          test: /[\\/]node_modules[\\/]lodash[\\/]/,
          name: "lodash",
          priority: 30,
        },
      },
    };

    return config;
  },
};
```

**5. ëª¨ë“ˆ ìµœì í™”**

```jsx
// Package.jsonì—ì„œ ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°
// moment.js â†’ date-fns (ë” ì‘ìŒ)
import { format } from "date-fns";

// lodash â†’ lodash-es (Tree Shaking ì§€ì›)
import { debounce } from "lodash-es";

// ì „ì²´ import í”¼í•˜ê¸°
// âŒ
import _ from "lodash";
// âœ…
import debounce from "lodash/debounce";
```

**6. CSS ìµœì í™”**

```jsx
// next.config.js
module.exports = {
  // CSS Modules ìë™ ìµœì í™”
  // Unused CSS ì œê±°

  // Tailwind CSS ìµœì í™”
  experimental: {
    optimizeCss: true, // Critters ì‚¬ìš©
  },
};
```

**8. ì„±ëŠ¥ ì²´í¬ë¦¬ìŠ¤íŠ¸**

```jsx
// âœ… 1. Image ìµœì í™”
<Image src="/hero.jpg" width={1200} height={600} priority />;

// âœ… 2. Font ìµœì í™”
import { Inter } from "next/font/google";

// âœ… 3. ì ì ˆí•œ ë Œë”ë§ ì „ëµ
// SSG > ISR > SSR > CSR

// âœ… 4. Dynamic Import
const Chart = dynamic(() => import("./Chart"), { ssr: false });

// âœ… 5. ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°
// npm uninstall unused-package

// âœ… 6. Tree Shaking í™•ì¸
// import { specific } from 'library';

// âœ… 7. Lighthouse CI ì„¤ì •
// npm install -g @lhci/cli

// âœ… 8. ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… í™•ì¸
// Bundle Analyzerë¡œ í™•ì¸

// âœ… 9. ìºì‹± ì „ëµ
export const revalidate = 3600;

// âœ… 10. API ìµœì í™”
// ë¶ˆí•„ìš”í•œ ë°ì´í„° í˜ì¹­ ì œê±°
```

**9. í”„ë¡œë•ì…˜ ë¹Œë“œ ìµœì í™”**

```jsx
// next.config.js
module.exports = {
  // SWC ë¯¸ë‹ˆíŒŒì´ì–´ (Terserë³´ë‹¤ ë¹ ë¦„)
  swcMinify: true,

  // ì†ŒìŠ¤ë§µ ë¹„í™œì„±í™” (í”„ë¡œë•ì…˜)
  productionBrowserSourceMaps: false,

  // ì••ì¶•
  compress: true,

  // ë¶ˆí•„ìš”í•œ ê¸°ëŠ¥ ì œê±°
  poweredByHeader: false,

  // ë¦¬ë‹¤ì´ë ‰íŠ¸ ìµœì í™”
  async redirects() {
    return [
      {
        source: "/old-path",
        destination: "/new-path",
        permanent: true,
      },
    ];
  },
};
```
